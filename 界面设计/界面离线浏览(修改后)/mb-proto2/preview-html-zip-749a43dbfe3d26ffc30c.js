(()=>{"use strict";var xe={46664:(c,P,e)=>{e.d(P,{A1:()=>U,A9:()=>$,Cp:()=>v.Cp,E8:()=>_,F7:()=>be,G8:()=>ce,Gx:()=>d,Jm:()=>te,OJ:()=>y,PK:()=>Ae,Qs:()=>ne,Qy:()=>fe,SD:()=>we,Tf:()=>b,V7:()=>Y,Wr:()=>N,XG:()=>_e,Xw:()=>ue,Yu:()=>L,bX:()=>u,dC:()=>le,hY:()=>pe,kZ:()=>ge,l9:()=>h,ob:()=>Re,qi:()=>s,r3:()=>Ie,s_:()=>o,sw:()=>Ee,ty:()=>ye,up:()=>Ce,vS:()=>X,vs:()=>Pe,wR:()=>Z,wZ:()=>Be,yV:()=>Me,yY:()=>ie,yk:()=>Se,yr:()=>l});var v=e(52781),a=e(46795),w=e(45465),n=e(72907),S=e(79619),k=e(63967);const A=(t,r)=>{const i=new Error("[NO SENTRY] "+t);return Object.assign(i,r),i},I=(t,r)=>fetchGetJSON("/api/upper/web_v1/design/readonly_initial?access_token="+t+"&password="+r),T=async(t,r)=>{const i="/api/flat/web_v1/preview/initial?access_token="+t+"&view_mode="+r,m=await fetch(i,{credentials:"same-origin"}),D=await m.json();if(m.status!==200)throw A("[fetchGetHead] failed with "+m.status+": "+i,{status:m.status,error_type:D==null?void 0:D.error_type});return D},L=(t,r)=>(0,a.SN)("/api/upper/web_v1/basics/"+t,{...r}),b=async()=>{let t=[];try{const r=await(0,a.DE)("/api/library/v4/recent_keywords");r!=null&&r.keywords&&(t=r==null?void 0:r.keywords)}catch(r){(0,n.$r)()}return t},o=()=>(0,a.sM)("/api/library/v4/recent_keywords"),d=t=>(0,a.Ds)("/api/library/v4/recent_keywords",{keyword:t}),s=async()=>{if((0,S.Z)())return p();{var t;let r;try{r=await(0,a.DE)("/api/library/v3/project_upper/user_combo_groups")}catch(i){return await(0,n.FY)(i),{}}return{userComboGroupList:(t=r)==null?void 0:t.user_combo_groups}}},p=async()=>{var t;let r;try{r=await(0,a.DE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+MB.user.solo_org.cid)}catch(i){return await(0,n.FY)(i),{}}return{userComboGroupList:(t=r)==null?void 0:t.org_combo_groups}},u=async t=>{var r;let{orgCid:i}=t,m;try{m=await(0,a.DE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+i)}catch(D){return await(0,n.FY)(D),{}}return{orgComboGroupList:(r=m)==null?void 0:r.org_combo_groups}},l=async t=>{const{icon_group:r,market_template:i}=await(0,v.Yk)(t.cid),{source:m,title:D}=r||{},H=await(0,a.DE)(m),se=w.I1[D]||D||"svg",{iconGroupData:re}=(0,w.u2)(H,se);return{iconGroupData:re,marketTemplate:i}},y=async()=>{const t=MB.user.solo_org.cid;try{const{asset_groups:r=[],assets:i}=await(0,a.Yo)("/api/library/v6/asset_groups?org_cid="+t);return{userAssetGroupList:r,userAssets:i}}catch(r){return(0,n.$r)(),{userAssetGroupList:[],userAssets:[]}}},h=async function(t){t===void 0&&(t="");const r=t||MB.currentOrg.cid;try{const{asset_groups:i,assets:m}=await(0,a.Yo)("/api/library/v6/asset_groups?org_cid="+r);return{orgAssetGroupList:i,orgAssets:m}}catch(i){return(0,n.$r)(),{orgAssetGroupList:[],orgAssets:[]}}},_=async t=>{if((0,S.Z)())return x(t);try{const{asset:r,user_asset:i}=await(0,a.B7)("/api/library/v3/asset_data/me/search_by_url",{image_url:t});return{asset:r,user_asset:i}}catch(r){await(0,n.FY)(r)}},x=async t=>{const r=MB.user.solo_org.cid;try{const{asset:i,flat_asset:m}=await(0,a.B7)("/api/library/v6/assets/search_by_url",{image_url:t,org_cid:r});return{asset:i,user_asset:m}}catch(i){await(0,n.FY)(i)}},N=async(t,r)=>{try{const{asset:i,flat_asset:m}=await(0,a.B7)("/api/library/v6/assets/search_by_url",{image_url:t,org_cid:r});return{asset:i,org_asset:m}}catch(i){await(0,n.FY)(i)}},Y=async t=>{if((0,S.Z)())return j(t);try{const{user_asset_group:r}=await(0,a.uP)("/api/library/v4/users/asset_groups/"+t.cid,{...t});return{user_asset_group:r}}catch(r){await(0,n.FY)(r)}},$=async(t,r)=>{const{name:i,parentCid:m=null,position:D}=r,{asset_group:H}=await(0,a.zi)("/api/library/v6/asset_groups",{org_cid:t,name:i,parent_cid:m,position:D});return{asset_group:H}},j=async t=>{const{cid:r,name:i,parent_cid:m,position:D}=t;try{const{asset_group:H}=await(0,a.uP)("/api/library/v6/asset_groups/"+r,{name:i,parent_cid:m,position:D});return{user_asset_group:H}}catch(H){await(0,n.FY)(H)}},U=async t=>{const{cid:r,name:i,parent_cid:m,position:D}=t;try{const{asset_group:H}=await(0,a.uP)("/api/library/v6/asset_groups/"+r,{name:i,parent_cid:m,position:D});return{org_asset_group:H}}catch(H){await(0,n.FY)(H)}},Z=async t=>{if((0,S.Z)())return de(t);try{return await(0,a.uP)("/api/library/v3/asset_data/me/assets/"+t.asset_cid,{...t})}catch(r){await(0,n.FY)(r)}},te=async t=>(await(0,a.SN)("/api/library/v6/asset_groups/",{asset_groups:t})).asset_groups,Ie=async(t,r)=>{const{name:i,groupCid:m}=r;return await(0,a.SN)("/api/library/v6/assets",{cids:t,name:i,group_cid:m})},de=async t=>{try{return await(0,a.uP)("/api/library/v6/assets",{...t})}catch(r){await(0,n.FY)(r)}},pe=async t=>{let{cids:r,...i}=t;try{return await(0,a.uP)("/api/library/v6/assets",{cids:r,...i})}catch(m){await(0,n.FY)(m)}},ue=async t=>{let{assetCid:r,name:i,groupCid:m}=t;if((0,S.Z)())return je({assetCid:r,name:i,groupCid:m});try{await(0,a.B7)("/api/library/v3/asset_data/me/assets",{cid,name:i,group_cid:m})}catch(D){await(0,n.FY)(D)}},je=async t=>{let{assetCid:r,name:i,groupCid:m}=t;try{await(0,a.B7)("/api/library/v6/assets",{asset_cid:[r],name:i,group_cid:m})}catch(D){await(0,n.FY)(D)}},Re=async t=>{let{assetCid:r,name:i,groupCid:m}=t;try{const D=await(0,a.B7)("/api/library/v6/assets",{asset_cid:[r],name:i,group_cid:m});return D==null?void 0:D.cid}catch(D){await(0,n.FY)(D)}},ge=async t=>{let{org_cid:r,name:i,group_cid:m}=t;if((0,S.Z)())return me({org_cid:r,name:i,group_cid:m});try{return(0,a.B7)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid,org_cid:r,org_asset_group_cid})}catch(D){await(0,n.FY)(D)}},me=async t=>{let{org_cid:r,name:i,group_cid:m}=t;try{return(0,a.B7)("/api/library/v6/asset_groups",{org_cid:r,name:i,parent_cid:null,group_cid:m,position:-99})}catch(D){await(0,n.FY)(D)}},fe=async t=>{(0,S.Z)()?await he(t):await(0,a.sM)("/api/library/v3/asset_data/me/assets/"+t.cid)},he=async t=>{await(0,k.uz)("/api/library/v6/assets",{cids:[t.cid]})},X=async t=>{await(0,k.uz)("/api/library/v6/assets",{cids:[t.cid]})},ye=async t=>{(0,S.Z)()?await ve(t):await(0,a.sM)("/api/library/v3/asset_data/me/asset_groups/"+t)},ve=async t=>{await(0,a.sM)("/api/library/v6/asset_groups/"+t)},Me=async t=>{await(0,a.sM)("/api/library/v6/asset_groups/"+t)},we=t=>(0,a.iv)("/preferences/update",{...t}),ne=async(t,r)=>{if((0,S.Z)())return We(t,r);try{return await(0,a.uP)("/api/library/v4/users/asset_groups/"+t,{...r})}catch(i){await(0,n.FY)(i)}},We=async(t,r)=>{const i=MB.user.solo_org.cid;try{return await(0,a.uP)("/api/library/v6/asset_groups/"+t,{...r,org_cid:i})}catch(m){await(0,n.FY)(m)}},_e=t=>async(r,i)=>{try{const m={...i,org_cid:t};return await(0,a.uP)("/api/library/v6/asset_groups/"+r,{...m})}catch(m){await(0,n.FY)(m)}},ie=async(t,r)=>{let i=null;try{const m=await(0,a.Yo)("/api/community/v1/workspace?category="+t+"&plabel="+r);m!=null&&m.market_templates&&(i=m==null?void 0:m.market_templates)}catch(m){(0,n.$r)()}return i},be=async(t,r)=>{let i=null,m=null;try{const D=await(0,a.DE)("/flpak/ww-p2wsearch?"+t);if(D!=null&&D.data){const H=D.data,{user_flat_assets:se,user_flat_asset_groups:re,org_flat_assets:De,org_flat_asset_groups:ke}=H.asset||{};return i={...H,asset:{user_assets:se,user_asset_groups:re,org_assets:De,org_asset_groups:ke}},m=D.p2mMMap,{data:i,p2mMMap:m}}}catch(D){(0,n.$r)({onClick:H=>H({type:"entry:search-panel:search:from:keyword",payload:{from:r}})})}},Pe=async t=>{let r=null;try{const i=await(0,a.DE)("/flpak/ww-p2meta/"+t);i!=null&&i.length&&(r=i)}catch(i){(0,n.$r)()}return r},ce=async t=>{let{currentComboPanel:r,projectMetaCid:i}=t;try{await(0,a.zi)("/flpak/ww-migrate-"+r+"-combo-group/"+i+"?mode=normal")}catch(m){await(0,n.FY)(m)}},Se=async t=>{let{projectBasicCid:r}=t;try{const{userId:i,flatKey:m}=await(0,a.DE)("/api/flat/web_v1/proj2-edit-info?prj2Cid="+r);return{userId:i,flatKey:m}}catch(i){await(0,n.FY)(i)}},Te=async t=>{let{projectBasicCid:r,accessToken:i,password:m}=t;try{const{userId:D,flatKey:H}=await fetchGetJSON("/api/flat/web_v1/proj2-preview-info?prj2Cid="+r+"&access_token="+i+"&password="+m);return{userId:D,flatKey:H}}catch(D){await apiErrorModals(D)}},Ce=t=>(0,a.DE)("/api/dashboard/v5/orgs/"+t),Ee=async t=>{const{project:r}=await(0,a.DE)("/api/dashboard/v5/projects/"+t);return r},Be=async t=>(0,a.DE)("/api/upper/web_v1/basics/statstics/"+t),le=async()=>{try{const{result:t}=await(0,a.DE)("/api/community/v1/community/scene_tag_labels?label_type=combo_group");return t}catch(t){console.log(t)}},Ae=async t=>{try{const{stickers:r}=await(0,a.zi)("/api/community/v1/sticker_search_es",{q:t,page:1,page_size:200});return r}catch(r){return console.log(r),[]}}},41449:(c,P,e)=>{e.d(P,{Dw:()=>a,H:()=>n,QQ:()=>A,X9:()=>k,o$:()=>v});const v="/proto",a=L=>v+"/"+L,w=L=>{const b=/^\/proto\/design\/(?:([^/]+?))$/i.exec(L);return b?b[1]:new Error("project cid error")},n=L=>{let{search:b,pathname:o}=L;if(o.includes("/sharing"))return o.includes("dashboard")||o.includes("htmlzip")?o.split("/").at(-3):o.includes("embed/v2")?location.pathname.split("/").at(-4):o.split("/").at(-2);{const d=new URLSearchParams(b).get("token");if(d)return d;const s=/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(o);return s?s[1]:""}},S=L=>{let{pathname:b}=L;const o=/^\/proto\/design\/([^/]+)\/?$/i.exec(b);return o?o[1]:""},k=L=>{let{search:b,pathname:o}=L;return n({search:b,pathname:o})||S({pathname:o})},A="/p2mkt_view",I=L=>A+"/"+L,T=L=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(L)[1]},44580:(c,P,e)=>{e.d(P,{LN:()=>L,o0:()=>S,uC:()=>A,uT:()=>k});var v=e(53955),a=e(42781),w=e(44864);const n=()=>MB.action?MB.__store__.dispatch:MB.webpackInterface.store.dispatch,S=function(b,o){o===void 0&&(o=sdkStore);const d=new Set;return o.walkHotItemSubtree2(b,s=>{s.hotAttr.mktCid&&d.add(s.hotAttr.mktCid)}),[...d]},k=async b=>{const o=(0,v.fV)();if(!o)return{mdWMMktList:new Set,mtWMMktList:new Set,noWMMktList:new Set};const{mdWMMktList:d,mtWMMktList:s,noWMMktList:p}=o,u=b.filter(x=>!d.has(x)&&!s.has(x)&&!p.has(x)),l=await(0,a.E5)(u),y=new Set([...d].concat(l.mdWMMktList)),h=new Set([...s].concat(l.mtWMMktList)),_=new Set([...p].concat(l.noWMMktList));return n()({type:"reducer:watermark:update-state",payload:{mdWMMktList:y,mtWMMktList:h,noWMMktList:_}}),{mdWMMktList:y,mtWMMktList:h,noWMMktList:_}},A=b=>{const o=(0,v.fV)();if(!o)return{mdWMMktList:new Set,mtWMMktList:new Set,noWMMktList:new Set};const{mdWMMktList:d,mtWMMktList:s,noWMMktList:p}=o,u=new Set([...d]),l=new Set([...s]),y=new Set([...p]),h=new Set([...b]);return sdkStore.walkHotItemSubtree2(w.$k,_=>{if(h.has(_.hotAttr.mktCid)&&h.delete(_.hotAttr.mktCid),h.size===0)return!0}),h.forEach(_=>{u.delete(_),l.delete(_),y.delete(_),(0,a.g7)(_)}),n()({type:"reducer:watermark:update-state",payload:{mdWMMktList:u,mtWMMktList:l,noWMMktList:y}}),{mdWMMktList:u,mtWMMktList:l,noWMMktList:y}},I=async()=>{const b=new Set;sdkStore.walkHotItemSubtree2(KEY_RB_MAIN,u=>{u.hotAttr.mktCid&&b.add(u.hotAttr.mktCid)});const o=await splitMktListByCid([...b]),d=new Set(o.mdWMMktList),s=new Set(o.mtWMMktList),p=new Set(o.noWMMktList);return n()({type:"reducer:watermark:update-state",payload:{mdWMMktList:d,mtWMMktList:s,noWMMktList:p}}),{mdWMMktList:d,mtWMMktList:s,noWMMktList:p}},T=()=>{const b=new Set;sdkStore.walkHotItemSubtree2(KEY_RB_MAIN,p=>{p.hotAttr.mktCid&&b.add(p.hotAttr.mktCid)});const o=new Set,d=new Set,s=new Set(b);n()({type:"reducer:watermark:update-state",payload:{mdWMMktList:o,mtWMMktList:d,noWMMktList:s}})},L=b=>{const o=new Set((b==null?void 0:b.md_vip_mkt_list)||[]),d=new Set((b==null?void 0:b.mt_vip_mkt_list)||[]),s=new Set((b==null?void 0:b.no_wm_mkt_list)||[]);n()({type:"reducer:watermark:update-state",payload:{mdWMMktList:o,mtWMMktList:d,noWMMktList:s}})}},42276:(c,P,e)=>{var v=e(26114),a=e(94947),w=e(13005),n=e(56656);const S={"sk-bouncedelay":"ZdD58bXGNcNoQjiPeXLu"},k={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};e(16708),e(85991),e(97381);var A=e(74059),I=e(51044),T=e(46479),L=e(83140),b=e(72605),o=e(80516),d=e(54852),s=e(55793),p=e(39271),u=e(49269),l=e(57464);class y extends I.PureComponent{constructor(g){super(g);const{store:C,projectBasic:O,projectMeta:B,isHtmlZip:W}=g,G=new URLSearchParams(location.search);let F="",f="";G.get("view_mode")==="read_only"&&(F=G.get("screen")||"",f=G.get("canvasId")||""),this.state={visibleIsEmpty:!1};try{const E=(0,p.rV)(F);C.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:O,projectMeta:B,screenCid:E,canvasCid:f,isHtmlZip:W}})}catch(E){this.state={visibleIsEmpty:!0}}}componentDidMount(){this.props.onComponentDidMount(),window.addEventListener("message",u.a,!1)}componentWillUnmount(){window.removeEventListener("message",u.a,!1)}render(){const{store:g}=this.props;return this.state.visibleIsEmpty?(0,s.V)():(0,l.jsx)(b.Kq,{store:g,children:(0,l.jsx)(d.A,{children:(0,l.jsx)(o.A,{})})})}}var h=e(82218);const _=async R=>{let{projectMetaCid:g}=R;await(0,h.F2)({userId:void 0,flpakKey:g,onTransferError:h.z0,onReadOnlyError:h.sH,isDummyCmt:!0,__fetchFlpakAsync:a.BD},void 0)};var x=e(98148);const N=function(R,g,C){const O=g.getGuidesData()||"[]",B=new Set(JSON.parse(O)),W=new Set,G=new Map,F={checkGuideHasShown:f=>ENV.IS_ON_PREMISES||B.has(f),checkGuideToBeShown:f=>W.has(f),getState:()=>({commonGuidesHasShown:Array.from(B),commonGuidesToBeShown:Array.from(W),mountGuidesMap:G}),tryToShowGuide:f=>{var E;if(B.has(f)||!((E=MB)!=null&&(E=E.user)!=null&&E.id)||ENV.IS_ON_PREMISES)return;const K=document.getElementById("MD_"+f);if(K){K.style.display="block";return}W.add(f),(0,x.o)(f,R,C)},markGuideAsRead:f=>{B.add(f),g.setGuidesData(JSON.stringify(Array.from(B)))},batchMarkGuideAsRead:f=>{f.forEach(E=>B.add(E)),g.setGuidesData(JSON.stringify(Array.from(B)))},closeAndMarkGuideAsRead:f=>{F.checkGuideHasShown(f)||(F.closeGuide(f),F.markGuideAsRead(f))},closeGuide:f=>{const E=document.getElementById("MD_"+f);E&&E.parentNode&&E.parentNode.removeChild(E)},closeAllGuide:()=>{const f=document.getElementById("GUIDES");f&&f.parentNode&&f.parentNode.removeChild(f)},removeGuide:f=>{B.delete(f),g.setGuidesData(JSON.stringify(Array.from(B)))},tryToContinueMountGuide:(f,E)=>{const K=G.get(f);K&&typeof(K==null?void 0:K.handleContinue)=="function"&&K.handleContinue(E)},tryToResizeMountGuide:f=>{const E=G.get(f);E&&typeof(E==null?void 0:E.handleResize)=="function"&&E.handleResize()},tryToCloseMountGuide:f=>{const E=G.get(f);E&&typeof(E==null?void 0:E.handleClose)=="function"&&E.handleClose()},registerMountGuideCallback:(f,E)=>{const K=G.get(f)||{};G.set(f,{...K,...E})},removeMountGuideCallback:(f,E)=>{if(!E){G.delete(f);return}const K=G.get(f)||{};G.set(f,{...K,[E]:void 0})}};return F},Y=R=>{let{store:g,commonGuidesData:C,isDesign:O,isPreview:B}=R;MB.commonGuideHelper=N(g,{getGuidesData:()=>C,setGuidesData:updateUserCommonGuidesData},{isDesign:O,isPreview:B})},$=R=>{let{store:g,isDesign:C,isPreview:O}=R;const B={guide:{dashboard_guides:"",workspace_guides:"",square_guides:null,workspace_guides_version:"",default_team_cid:"",root_project_team_cid:"",workspace_guides_2203:"",workspace_guides_2203_version:"",aboard_guides:""},guide_project_template_cid:"",guide_project_template_2203_cid:"",guide_flow_template_cid:"",guide_design_template_cid:"",guide_prototype_template_cid:""},{guide:{workspace_guides:W}}=B;MB.commonGuideHelper=N(g,{getGuidesData:()=>W,setGuidesData:()=>{}},{isDesign:C,isPreview:O})};var j=e(77757),U=e(25058),Z=e(88753),te=e(42226),Ie=e(68673),de=e(29601),pe=e(79619);const ue=R=>{let{initialData:g,designOptions:C,global:O,onUpdateSharing:B}=R;const{user:W,org:G,team:F,preference:f,orgList:E,user_fcg:K,org_fcg:z,space:V,canEditByCurrentUser:Q}=g,{currentUser:q,currentOrg:J}=(0,pe.n)({user:W,org:G});(0,te.kZ)((0,de.w)()),Object.assign(MB,{user:q||{},currentOrg:J,canEditByCurrentUser:Q,global:{...O,popupHelper:(0,U.L)(),experienceLoginModalHelper:j.F}}),MB.action("current:update:state",{currentOrg:J,currentTeam:F,currentUser:q,orgList:E,user_fcg:K,org_fcg:z,currentSpace:V}),MB.action("update:design:options",{designOptions:C}),W!=null&&W.id&&MB.action("entry:init:preference",{preference:f}),B&&B()},je=async R=>{let{designStore:g}=R,C="[]";try{const{guide:O}=await requestUserCommonGuidesData();C=O==null?void 0:O.workspace_guides}catch(O){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}await initCommonGuide({store:g,commonGuidesData:C,isDesign:!0,isPreview:!1})},Re=async R=>{let{type:g,projectBasicCid:C}=R;switch(g){case DesignType.Design:return requestProjectFullDataFlat(C);case DesignType.Experience:return requestExperienceFullDataFlat(C);default:throw new Error(g+" not found in known design types for "+C)}};var ge=e(66778),me=e(64334),fe=e(60310),he=e(12201),X=e(9376);const ye=R=>{const{isEmbedV1:g=!1}=R||{};return{isDesktop:!((0,X.Fr)()||g),isInApp:!1,isMultiLink:!1,isMobile:(0,X.Fr)(),isIOSClient:(0,X.Hv)(),isStandAlone:(0,X.Gd)(),isEmbedV1:g,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,X.II)(),isForum:(0,X.uf)(),isElectron:(0,X.b8)(),isSquare:!1,isFeishu:(0,X.Fl)(),isWechat:(0,X.vq)(),...R}},ve=R=>{const{isMobile:g,isEmbedV2:C,isSquare:O}=R;return g?fe.A:C||O?me.A:he.A};var Me=e(44580);const we=R=>{let{designOptions:g,previewOptions:C,initialData:O,WMListConfig:B,onComponentDidMount:W,sharing:G}=R,F=!1;const f=(0,L.s)(MB);ue({initialData:O,designOptions:g,global:{designOptions:g,previewOptions:C}}),(0,Me.LN)(B);const{isIOSClient:E,isStandAlone:K}=C;(K||E)&&(document.documentElement.style.height="100vh");const{runnerController:z,messageBucket:V,webpackInterface:Q,PreviewApp:q}=(0,ge._)(ve(C));return Object.assign(MB,{runnerController:z,messageBucket:V,webpackInterface:Q,global:{...MB.global||{},popupHelper:(0,U.L)(),designOptions:g,previewOptions:C}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:C}}),{requestData:async()=>{const{user:J,org:ae,preference:oe,project_basic:ee,project_meta:Ge}=O;return $({store:f,isDesign:!0,isPreview:!1}),Object.assign(MB,{tag:ee==null?void 0:ee.version}),MB.action("update:design:options",{designOptions:MB.global.designOptions}),await _({projectMetaCid:Ge.cid}),MB.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:G}}),MB.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:oe||{}}}),Object.assign(MB,{user:J||{},canEditByCurrentUser:!1,org:ae||void 0}),MB.webpackInterface.store.dispatch({type:"entry:state:init"}),F=!0,{projectAlike:ee,projectMeta:Ge,projectShare:G}},renderDesign:J=>{let{projectAlike:ae,projectMeta:oe}=J;return F?(0,l.jsx)(y,{store:f,projectBasic:ae,projectMeta:oe,onComponentDidMount:W,isHtmlZip:!0}):null},renderPreview:J=>{let{projectAlike:ae,projectMeta:oe,projectShare:ee}=J;return F?((0,s.X)(ee),(0,l.jsx)(q,{store:Q.store,previewMode:"preview",projectAlike:ae,projectMeta:oe,projectShare:ee})):null}}};var ne=e(21676);const We=ne.Ay.div.withConfig({displayName:"styles__StyledExampleApp",componentId:"sc-1e7mzg5-0"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;.loading-container{position:absolute;top:50%;left:50%;.mb-loading{width:80px;height:80px;margin-top:-40px;margin-left:-40px;}.chris-icon{position:absolute;left:68%;top:-8%;}}}.mb-design-page{height:100%;&,#mb-toolbar{transition:all 0.2s ease-in-out;}&.is-collapse{opacity:0;z-index:0;#mb-toolbar{transform:translateY(-100%);}.mb-right-panel{transform:translateX(100%);}}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;transition:all 0.2s ease-in-out;&.is-collapse{opacity:0;z-index:0;}}"]),_e=ne.Ay.div.withConfig({displayName:"styles__StyledROExampleApp",componentId:"sc-1e7mzg5-1"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;.loading-container{position:absolute;top:50%;left:50%;.mb-loading{width:80px;height:80px;margin-top:-40px;margin-left:-40px;}.chris-icon{position:absolute;left:68%;top:-8%;}}}.mb-design-page{height:100%;position:relative;z-index:1;&.is-collapse{opacity:0;z-index:0;}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;&.is-collapse{opacity:0;z-index:0;}}"]);var ie=e(1694),be=e(21952),Pe=e(86634),ce=e.n(Pe);class Se extends I.PureComponent{render(){const{isCollapse:g,renderReadOnly:C,projectAlike:O,projectMeta:B}=this.props;return(0,l.jsx)("div",{ref:W=>this.$element=W,className:ce()("mb-design-page",{"is-collapse":g}),children:C({projectAlike:O,projectMeta:B})})}}class Te extends I.PureComponent{constructor(g){super(g),(0,A.A)(this,"setElementRef",C=>this.$element=C),MB.f.inPreview=!g.isCollapse}componentDidMount(){this.$element.addEventListener("wheel",this.handleWheel,{passive:!1})}componentWillUnmount(){MB.f.inPreview=!1,this.$element.removeEventListener("wheel",this.handleWheel)}handleWheel(g){(g.ctrlKey||g.metaKey)&&g.preventDefault()}render(){const{isCollapse:g,renderPreview:C,projectAlike:O,projectMeta:B,projectShare:W}=this.props;return(0,l.jsx)("div",{ref:this.setElementRef,className:ce()("mb-preview-page",{"is-collapse":g}),children:C({projectAlike:O,projectMeta:B,projectShare:W})})}}var Ce=e(87291),Ee=e(14941),Be=e(86431),le=e(24013),Ae=e(31900),t=e(15139),r=e(40684),i=e(76445),m=e(6637);const D=R=>{const{current:{currentProject:g},ui:{toolbar:{isShowSticky:C},leftLayout:{leftPanel:{show:O,width:B},directory:{screen:{currentPage:W},bottom:{height:G},screen:{screenCollapseKeySet:F}}},rightLayout:{rightPanel:{show:f,resizedWidth:E}},fixedLayout:{modals:{previewCanvasModal:K,previewModal:z}}},editor:{state:{mode:{fullScreenMode:V}}}}=MB.__store__.getState(),Q=()=>{const{pageKey:q,canvasKey:J}=t.A.validateAndTryCorrectPGAndCVKey(W.key,R,null,g.category===r.t_);MB.webpackInterface.store.dispatch({type:"entry:runner:activate:canvas",payload:{pageKey:q,canvasKey:J,saveHistory:!1,forceInit:!0,keepScale:!1}}),MB.webpackInterface.store.dispatch({type:"preview:set:leftPaneWidth",payload:{leftPaneWidth:B!=null?B:250}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{hasChangedScaleManually:!1}}),MB.webpackInterface.store.dispatch({type:"preview:panel:set:height",payload:{panelHeight:G}}),MB.webpackInterface.store.dispatch({type:"preview:set:rightPaneWidth",payload:{rightPaneWidth:E,projectCid:g.cid}}),V&&MB.webpackInterface.store.dispatch({type:"reducer:preview-toolbar:fullscreen",payload:{isFullScreenMode:!0}}),MB.webpackInterface.store.dispatch({type:"ST:update",payload:{STMode:C}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:isMinimized",payload:{isMinimized:!O,isMemorize:!V}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:rightPane",payload:{isShowRightPane:f,isMemorize:!V}}),MB.webpackInterface.store.dispatch({type:"preview:set:collapsedRBPageKeySet",payload:{collapsedRBPageKeySet:F}}),MB.webpackInterface.store.dispatch({type:"entry:preview:toggle:isHiddenToolBar",payload:{value:!1}}),MB.action("modal:reset:state"),MB.action("entry:exit:edit:basket"),MB.__store__.dispatch({type:"entry:comment:disabled",payload:{noWigglingCommentCid:!0}}),MB.__store__.dispatch({type:"versions:update",payload:{isVersionManagementPaneShow:!1}}),MB.__store__.dispatch(i.GO.toggleInspectMode(!1)),MB.__store__.dispatch(i.GO.toggleHandMode(!1)),MB.__store__.dispatch(i.GO.select([])),MB.__store__.dispatch({type:"elbow:update",payload:{isInElbowMode:!1}}),MB.__store__.dispatch({type:"entry:ST:STMode:disable"}),MB.__store__.dispatch({type:"ST:clear"})};K!=null&&K.isOpen||z!=null&&z.isOpen?(MB.action("modal:reset:preview:modal:state"),setTimeout(()=>{Q()},600)):Q()},H=(R,g)=>{const{container:{current:{rootProject:C},common:{leftPaneWidth:O,panelHeight:B,rightPaneWidth:W,collapsedRBPageKeySet:G},runner:{activePageKey:F},previewSetting:{isFullScreenMode:f,isMinimized:E,isShowRightPane:K}},ST:{STMode:z}}=MB.webpackInterface.store.getState(),{ui:{leftLayout:{directory:{screen:{currentPage:V}}}},editor:{state:{mode:{isHtmlZipPreview:Q}}}}=MB.__store__.getState();V.key!==F&&MB.__store__.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:R,projectMeta:g,screenCid:F,isHtmlZip:Q}}),MB.__store__.dispatch({type:"screen:add:collapseKeySet",payload:{refs:G,projectCid:C.cid}}),f&&MB.__store__.dispatch(i.GO.toggleFullScreenMode(!0)),MB.webpackInterface.store.dispatch({type:"entry:runner:cleanup:audio"}),MB.webpackInterface.store.dispatch({type:"runner:reset:state:except:history"}),MB.webpackInterface.store.dispatch({type:"container:comment:reset:state"}),MB.webpackInterface.store.dispatch({type:"preview:previewPanel:navindex",payload:{previewPanelNavIndex:0}}),MB.__store__.dispatch({type:"left-panel:set:width",payload:{width:O,projectCid:C.cid}}),MB.__store__.dispatch({type:"directory-panel:bottom:set:height",payload:{height:B}}),MB.__store__.dispatch({type:"right-side-panel:update:resize:width",payload:{width:W,projectCid:C.cid}}),MB.__store__.dispatch({type:"right-side-panel:collapse:panel",payload:{show:K,isMemorize:!f}}),MB.__store__.dispatch({type:"left-panel:collapse:panel:show",payload:{show:!E,isMemorize:!f}}),MB.__store__.dispatch({type:"entry:observe:dom:size:update-viewport-rect"}),MB.__store__.dispatch({type:"entry:isShowSticky:toggle",payload:{isShowSticky:z}}),requestAnimationFrame(()=>MB.__store__.dispatch({type:"entry:update:viewport:rect"})),MB.webpackInterface.store.dispatch({type:"entry:comment:disabled"}),(0,m.RF)(F)};class se extends I.PureComponent{constructor(g){super(g),(0,A.A)(this,"handleWheelChanged",z=>{if(z.deltaX===0)return;const V=document.getElementById("workspace"),Q=V.scrollLeft+V.offsetWidth===V.scrollWidth&&z.deltaX>0,q=V.scrollLeft===0&&z.deltaX<0;(Q||q)&&z.preventDefault()}),(0,A.A)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(Ce.T),this.setState({isLoading:!1})}),(0,A.A)(this,"keyboardManager",new ie.Rr);const{viewMode:C,designOptions:O,previewOptions:B,initialData:W,WMListConfig:G,sharing:F}=g;MB.switchToPreview=z=>{this.state.viewMode!=="device"&&((0,le.N8)("device"),D(z),this.setState({viewMode:"device"}))},MB.switchToReadOnly=()=>{if(this.state.viewMode==="read_only")return;const{projectAlike:z,projectMeta:V}=this.state;(0,le.N8)("read_only"),H(z,V),this.setState({viewMode:"read_only"})},this.state={isLoading:!0,isDataLoaded:!1,viewMode:C,projectAlike:null,projectMeta:null,projectShare:void 0};const{requestData:f,renderDesign:E,renderPreview:K}=we({initialData:W,WMListConfig:G,designOptions:O,previewOptions:B,onComponentDidMount:this.handleDesignDidMount,sharing:F});this.requestData=f,this.renderDesign=E,this.renderPreview=K}componentDidMount(){Promise.all([this.requestData()]).then(g=>{let[{projectAlike:C,projectMeta:O,projectShare:B}]=g;this.setState({projectAlike:C,projectMeta:O,projectShare:B},()=>{this.setState({isDataLoaded:!0})});const W=document.getElementById("workspace");W&&W.addEventListener("wheel",this.handleWheelChanged)})}componentWillUnmount(){const g=document.getElementById("workspace");g&&g.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:g,isDataLoaded:C,viewMode:O,projectAlike:B,projectMeta:W,projectShare:G}=this.state,{renderDesign:F,renderPreview:f}=this;return(0,l.jsx)(Ae.G.Provider,{value:O,children:(0,l.jsx)(ie.M.Provider,{value:this.keyboardManager,children:(0,l.jsx)(be.$,{children:(0,l.jsxs)(_e,{className:"example-app",children:[C&&(0,l.jsx)(Se,{isCollapse:O!=="read_only",projectAlike:B,projectMeta:W,renderReadOnly:F}),C&&(0,l.jsx)(Te,{isCollapse:O!=="device",projectAlike:B,projectMeta:W,projectShare:G,renderPreview:f}),g&&(0,l.jsxs)("div",{className:"loading-container",children:[(0,l.jsx)(T.Tw,{className:"mb-loading"}),(0,Be.X)()&&(0,l.jsx)(Ee.n,{className:"chris-icon"})]})]})})})})}}var re=e(36820),De=e(88223),ke=e(10286),Ue=e(36429);e.p="./mb-proto2/";const Fe=document.getElementById("workspace"),Ne=async()=>{var R,g;const C=ye({isHTMLZip:!0});(0,X.Fr)()&&((R=document.querySelector("body"))==null||R.classList.add("mobile"));let O=await(0,a.Rz)();const{projectUpper:B,projectMeta:W}=O;O={...O,projectName:B.name,project_basic:B,project_meta:W};const{sharing:G}=await(0,ke.J_)({project:B}),F=await(0,a.CS)(),{generateLang:f}=await Ue.qu.loadLLG();await f(),document.title=""+(0,De.qk)(B.name||B.title),!ENV.IS_ON_PREMISES&&(0,re.I2)();const E=(g=new URLSearchParams(location.search))==null?void 0:g.get("view_mode"),K=window.HZv5_PREVIEW_MODE||"",z=E?E==="device":K==="device",V={isDesign:!0,isExperience:!1,isLoggedExperience:!1};(0,v.createRoot)(Fe).render((0,l.jsx)(se,{initialData:O,WMListConfig:F,viewMode:z?"device":"read_only",designOptions:V,previewOptions:C,sharing:G}))};document.addEventListener("DOMContentLoaded",async()=>{await Ne()})},67122:(c,P,e)=>{e.d(P,{L7:()=>n,M2:()=>A,RY:()=>d,XI:()=>k,ix:()=>S,kP:()=>o,lK:()=>I,rD:()=>b});var v=e(59305),a=e(96731);const w=/^image\/(png|jpg|jpeg|gif|svg|svg\+xml)$/i,n=2,S=5,k=(s,p,u,l,y)=>{if(!w.test(s.type))throw Object.assign(new Error(I18N.dUtils.damaged_file),{desc:I18N.dUtils.support_file_type,asset:s});const h=(0,v.xR)(u,l),{trial:_,plan:x,maxPicBytes:N}=h,Y=N/1024/1024,$=(0,v.Ke)(x,_),j=!!MB.currentOrg,{current_plan:U}=MB.user,Z=j?Y:U==="free"?n:S;if(s.size>Z*1024*1024)throw p==="library"?(ModalHelper&&ModalHelper.libraryNotice&&ModalHelper.libraryNotice("\u4E0A\u4F20\u56FE\u7247\u5BB9\u91CF\u8FC7\u5927","error"),new Error("dashboard upload failed")):l?($&&($===I18N.Common.business_plan||$===I18N.Common.business_trial_plan)?MB.action("modal:update:state",{orgFullBeyondNotice:{isOpen:!0,beyondType:"picSize"}}):MB.action("modal:update:state",{rightsAndInterestsModal:{isOpen:!0,type:a.hC.OrgMaxPicSize}}),new Error("NoErrorTips")):(MB.action("modal:update:state",{rightsAndInterestsModal:{isOpen:!0,type:a.hC.SoloMaxPicSize}}),new Error("NoErrorTips"))},A=async s=>{const p=await new Promise((l,y)=>{const h=new FileReader;h.onerror=()=>y(new Error(I18N.dUtils.unsupported)),h.onload=_=>l(_.target.result),h.readAsDataURL(s)}),u=await new Promise((l,y)=>{const h=new Image;h.onerror=()=>y(new Error(I18N.dUtils.unsupported)),h.onload=()=>l(h),h.src=p});return{data:p,width:u.width,height:u.height}},I=s=>{s.payload&&s.payload.status===401?MB.global.popupHelper.alertAsync({title:I18N.dUtils.err_info_modal.INVALID_COOKIE.title,desc:I18N.dUtils.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dUtils.confirm}).then(()=>{location.href=location.origin+"/signin"}):MB.global.popupHelper.alertAsync({title:s.message,desc:s.desc,isHTML:s.isHTML,confirmText:s.confirmText}).then(()=>{s.type==="free"&&MB.global.popupHelper.chargeAsync({mode:"solo",productId:8988,hours:"yearly",payEntrance:"\u56FE\u7247\u9650\u5236-\u5347\u7EA7\u4E2A\u4EBA"})})},T=(s,p)=>s.endsWith(p)?s:s+("-"+p),L=(s,p)=>s.startsWith("#")?"#"+T(s.slice(1),p):null,b=(s,p,u)=>{if(s.attributes){const l=s.getAttribute("id");l&&l.length>0&&(s.setAttribute("id",T(l,p)),u&&u.id&&u.id.push(l));const y=s.getAttribute("class");if(y&&y.length>0){const _=y.split(/\s+/).map(x=>T(x,p)).join(" ");s.setAttribute("class",_),u&&u.class&&u.class.push(y)}for(const _ of["href","xlink:href"]){const x=s.getAttribute(_);if(x&&x.length>0){const N=L(x,p);N&&s.setAttribute(_,N)}}const h=["clip-path","color-profile","fill","filter","marker-start","marker-mid","marker-end","mask","stroke","style"];for(const _ of h){const x=s.getAttribute(_);if(x&&x.length>0){const N=x.replace(/url\((.*?)\)/gi,(Y,$)=>{const j=L($,p);return j==null?Y:"url("+j+")"});N&&s.setAttribute(_,N)}}for(const _ of["begin","end"]){const x=s.getAttribute(_);if(x&&x.length>0){const N=x.split(/\s*;\s+/).map(Y=>{if(Y.endsWith(".end")||Y.endsWith(".start")){const[$,j]=Y.split(".");return T($,p)+"."+j}return Y});s.setAttribute(_,N.join("; "))}}if(s.childNodes)for(const _ of s.childNodes)b(_,p,u)}},o=(s,p,u)=>{const l=s?s.querySelectorAll("style"):[];u.id=[...new Set(u.id)],u.class=[...new Set(u.class)];for(const y of l)y&&!y.textContent.includes(p)&&(u.id.forEach(h=>{y.textContent=y.textContent.replace(new RegExp("\\b"+h+"\\b","g"),h+"-"+p)}),u.class.forEach(h=>{y.textContent=y.textContent.replace(new RegExp("\\b"+h+"\\b","g"),h+"-"+p)}))},d=s=>{const{path:p}=s==null?void 0:s.iconData,u=new DOMParser,l='<svg xmlns="http://www.w3.org/2000/svg">'+p+"</svg>",h=u.parseFromString(l,"text/html").querySelector("svg"),_={id:[],class:[]},x=(s==null?void 0:s.key)||"",N=x.includes("/")?x.split("/").join(""):x;return b(h,N,_),o(h,N,_),h}},59305:(c,P,e)=>{e.d(P,{Ke:()=>T,ln:()=>b,xR:()=>L});var v=e(76713),a=e.n(v),w=e(45852),n=e(67122);const S=300,k=(o,d,s)=>{const{is_trial_enabled:p}=o||{};if(p||!A(d==null?void 0:d.plan,d==null?void 0:d.trial))return!1;const{trial_end_on:l}=d;return l?!1:!s.some(h=>{const _=I(h),{value_in_cents:x}=h;return["paid"].includes(_)||x>10})},A=(o,d)=>o==="org_free"&&!d,I=o=>{if(A(o==null?void 0:o.plan,o==null?void 0:o.trial))return"free";const{paid:d,trial:s,value_in_cents:p,next_billing_on:u,plan:l}=o||{},y=dayjs(u).startOf("day"),h=dayjs().startOf("day"),_=y.isSameOrBefore(h);let x;return _?(x=p>10?"paidExpire":"trialExpire",l||(x="defaultExpire")):(d&&(x="paid"),s&&(x="trial")),x},T=(o,d)=>o==="org_free"&&!d?I18N.Common.free_plan:o==="org_lite"?I18N.Common.team_plan:o==="org_full"?I18N.Common.business_plan:o==="org_free"&&d?I18N.Common.business_trial_plan:I18N.Common.business_plan,L=(o,d)=>{if(d&&d.cid){const{limitation:s,plan:p,trial:u,paid:l,next_billing_on:y,value_in_cents:h}=d;return{storage:s.storage,isExportWatermark:s.is_export_watermark,maxPicBytes:s.max_pic_bytes,maxScreenCount:s.max_p2page_count||3,maxProjectVersionCount:s.max_project_version_count,maxMktCount:s.max_mkt_count,plan:p,trial:u,paid:l,next_billing_on:y,value_in_cents:h,maxSharingCount:s.max_project_share_count,maxProjectCount:s.max_project_count,maxCanvasCount:s.max_p2canvas_count||20,maxWidgetCount:s.max_widget_count||S}}if(o&&o.cid){const{limitation:s,current_plan:p,trial:u,paid:l,next_billing_on:y}=o;return{storage:s.storage,current_plan:p,trial:u,paid:l,next_billing_on:y,isExportWatermark:!1,maxPicBytes:p==="solo"?n.ix:n.L7,maxScreenCount:(s==null?void 0:s.max_p2page_count)||3,maxProjectVersionCount:0,maxMktCount:0,value_in_cents:0,maxSharingCount:p==="solo"?3:1,maxProjectCount:s.max_project_count||3,maxCanvasCount:s.max_p2canvas_count||20,maxWidgetCount:s.max_widget_count||S}}return{storage:0,isExportWatermark:!1,maxPicBytes:0,maxScreenCount:0,maxProjectVersionCount:0,maxMktCount:0,plan:"",trial:!1,paid:!1,next_billing_on:"",value_in_cents:0,maxSharingCount:1,maxProjectCount:3,maxCanvasCount:20,maxWidgetCount:S}},b=(o,d)=>{let s;return d&&(s=A(d.plan,d.trial)?3:30),!d&&o&&(s=(0,w.e)(o)==="free"?3:30),s}},45852:(c,P,e)=>{e.d(P,{e:()=>n});var v=e(76713),a=e.n(v);const w=S=>{if(!S)return"\u514D\u8D39\u7248";const{edition:k,current_plan:A,trial:I}=S;if(k==="premium_lifetime")return"\u5C0A\u4EAB\u7EC8\u8EAB\u7248";if(k==="standard_lifetime")return"\u7EC8\u8EAB\u7248";if(A==="free")return"\u514D\u8D39\u7248";if(A==="solo")return I?"\u8BD5\u7528\u7248":"\u6807\u51C6\u7248"},n=S=>{if(!S)return"free";const{plan:k,paid:A,trial:I,next_billing_on:T}=S,L=a()(T).startOf("day"),b=a()().startOf("day"),o=L.isSameOrBefore(b);let d;return o?d="free":(A&&(d="paid"),k==="solo"&&I&&(d="trial"),k==="free"&&(d="free")),d}},9376:(c,P,e)=>{e.d(P,{Bd:()=>_,Fl:()=>k,Fr:()=>b,Gd:()=>u,H8:()=>I,Hv:()=>p,II:()=>l,Md:()=>h,VK:()=>$,b8:()=>w,cX:()=>n,gm:()=>T,lg:()=>x,m0:()=>o,nr:()=>L,uF:()=>S,uf:()=>y,vq:()=>A});var v,a;const w=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),n=()=>/(Macintosh)/i.test(navigator.userAgent),S=()=>/(Windows)/i.test(navigator.userAgent),k=()=>/(Lark)/i.test(navigator.userAgent),A=()=>/MicroMessenger/i.test(navigator.userAgent),I=()=>/Chrome/i.test(navigator.userAgent),T=()=>/Firefox/i.test(navigator.userAgent),L=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),b=()=>{const j=new URLSearchParams(location.search);return j&&j.get("inapp")==="1"&&(e.g.isInAPP=!0),/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent)||window.isInAPP},o=()=>/Android/i.test(navigator.userAgent),d=()=>/(iPad)/.test(navigator.userAgent),s=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),p=()=>!!(window.webkit&&window.webkit.messageHandlers),u=()=>navigator.standalone,l=()=>/\/uichina$/.test(location.pathname),y=()=>/\/forum$/.test(location.pathname),h=()=>/(MobileClient)/.test(navigator.userAgent),_=!!(typeof window<"u"&&window.document&&window.document.createElement),x=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?((v=navigator)==null?void 0:v.platform)||((a=navigator)==null||(a=a.userAgentData)==null?void 0:a.platform):""),N=()=>{var j;if(!((j=navigator)!=null&&j.plugins))return!1;for(const U in navigator.plugins)if(navigator.plugins[U]&&navigator.plugins[U].filename==="np-mswmp.dll")return!0;return!1},Y=j=>{j=j.toLowerCase();const U=j.includes("qihu"),Z=j.includes("360se"),te=j.includes("360ee");return U&&(Z||te)},$=()=>{let j,U;const Z=navigator.userAgent;if(U=void 0,j=Z.match(/(opera|chrome|qq|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(j[1]))return U=/\brv[ :]+(\d+)/g.exec(Z)||[],{name:"IE",version:parseFloat(U[1]||"")};if(j[1]==="Chrome"){if(Y(Z)||N())return{name:"360Browser",version:"unknown"};if(/Edg/i.test(Z))return U=Z.match(/Edg\/(\d+)/i),{name:"Edge",version:U?parseFloat(U[1]):"unknown"};if(U=Z.match(/\b(OPR|Edge)\/(\d+)/),U!==null)return{name:U[1].replace("OPR","Opera"),version:parseFloat(U[2])}}return/QQBrowser/i.test(Z)?(U=Z.match(/QQBrowser\/(\d+)/i),{name:"QQBrowser",version:U?parseFloat(U[1]):"unknown"}):(j=j[2]?[j[1],j[2]]:[navigator.appName,navigator.appVersion,"-?"],(U=Z.match(/version\/(\d+)/i))!==null&&j.splice(1,1,U[1]),{name:j[0],version:parseFloat(j[1])})}},6637:(c,P,e)=>{e.d(P,{Fw:()=>k,H1:()=>I,RF:()=>b,cL:()=>T,fl:()=>L,hw:()=>A,u5:()=>w,yA:()=>S});var v=e(12298),a=e(6795);const w=o=>{let{width:d,height:s,scale:p}=o;const u=p/100,l=document.querySelector("#canvas").getBoundingClientRect(),y=document.querySelector(".mb-viewport").getBoundingClientRect(),h={x:(y.left+y.right)/2,y:(y.top+y.bottom)/2},_={x:(h.x-l.left)/u,y:(h.y-l.top)/u};return{top:Math.round(_.y-s/2),left:Math.round(_.x-d/2)}},n=(o,d)=>{const s=document.querySelector(o);if(!s)return;const p=s.querySelector('[data-cid="'+d+'"]')||s.querySelector('[data-interactive-target-key="'+d+'"]');if(!p)return;const{height:u,top:l}=s.getBoundingClientRect(),y=p.getBoundingClientRect(),h=y.top-l>=u,_=y.top<l;(h||_)&&(s.scrollTop+=y.top-l)},S=(0,a.hb)((o,d)=>{if(!d||!o)return;const s=o.querySelector('.rn-content-item[data-cid="'+d+'"]');if(!s)return;const{height:p,top:u}=o.getBoundingClientRect(),l=s.getBoundingClientRect(),y=l.top-u>=p,h=l.top<u;(y||h)&&(o.scrollTop+=l.top-u)},{timeout:500}),k=(o,d,s)=>{let{width:p,height:u,scale:l}=d,{top:y}=w({width:p,height:u,scale:l});const h=o.sort((N,Y)=>Y.widget.x+Y.widget.w/2-(N.widget.x+N.widget.w/2)),{widget:{x:_,w:x}}=h[0];return s.length!==0&&(y=sdkStore.getHotKeyListAABB(s.map(N=>N.key))[1]),{left:_+x/2+50,top:y}},A=(o,d,s)=>{const p=sdkStore.getHotKeyListAABB(s.map(h=>h.key));let u=p[2],l=(0,v.Q5)(u,o),y;for(;;){if(!l||l[0]>u+d+50){y={x:u+50,y:p[1]};break}u=l[2],l=(0,v.Q5)(u,o)}return{left:y.x,top:y.y}},I=o=>n("#mobile-screen-tree",o),T=o=>n(".mb-preview-page .canvas-scroll-list",o),L=o=>n(".screen-list-container",o),b=o=>n(".mb-design-page #screen-scroll-list",o)},16700:c=>{c.exports=canvg},94994:c=>{c.exports=dompurify},9820:c=>{c.exports=html2canvas}},Oe={};function M(c){var P=Oe[c];if(P!==void 0)return P.exports;var e=Oe[c]={id:c,loaded:!1,exports:{}};return xe[c].call(e.exports,e,e.exports,M),e.loaded=!0,e.exports}M.m=xe,M.amdO={},(()=>{var c=[];M.O=(P,e,v,a)=>{if(e){a=a||0;for(var w=c.length;w>0&&c[w-1][2]>a;w--)c[w]=c[w-1];c[w]=[e,v,a];return}for(var n=1/0,w=0;w<c.length;w++){for(var[e,v,a]=c[w],S=!0,k=0;k<e.length;k++)(a&!1||n>=a)&&Object.keys(M.O).every(o=>M.O[o](e[k]))?e.splice(k--,1):(S=!1,a<n&&(n=a));if(S){c.splice(w--,1);var A=v();A!==void 0&&(P=A)}}return P}})(),M.n=c=>{var P=c&&c.__esModule?()=>c.default:()=>c;return M.d(P,{a:P}),P},(()=>{var c=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,P;M.t=function(e,v){if(v&1&&(e=this(e)),v&8||typeof e=="object"&&e&&(v&4&&e.__esModule||v&16&&typeof e.then=="function"))return e;var a=Object.create(null);M.r(a);var w={};P=P||[null,c({}),c([]),c(c)];for(var n=v&2&&e;typeof n=="object"&&!~P.indexOf(n);n=c(n))Object.getOwnPropertyNames(n).forEach(S=>w[S]=()=>e[S]);return w.default=()=>e,M.d(a,w),a}})(),M.d=(c,P)=>{for(var e in P)M.o(P,e)&&!M.o(c,e)&&Object.defineProperty(c,e,{enumerable:!0,get:P[e]})},M.f={},M.e=c=>Promise.all(Object.keys(M.f).reduce((P,e)=>(M.f[e](c,P),P),[])),M.u=c=>""+{437:"lazy-lib-fontkit",703:"lazy-lib-rehype",956:"lazy-lib-i18n",976:"lazy-lib-dl"}[c]+"-"+{437:"f928a89d007db33b8764",703:"f1953540fb6d5bc8a699",956:"52c24fd2c978da898a5b",976:"ea72883bd82bab66e6fc"}[c]+".js",M.miniCssF=c=>{},M.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(c){if(typeof window=="object")return window}}(),M.o=(c,P)=>Object.prototype.hasOwnProperty.call(c,P),(()=>{var c={},P="@mb2023/mb-proto:";M.l=(e,v,a,w)=>{if(c[e]){c[e].push(v);return}var n,S;if(a!==void 0)for(var k=document.getElementsByTagName("script"),A=0;A<k.length;A++){var I=k[A];if(I.getAttribute("src")==e||I.getAttribute("data-webpack")==P+a){n=I;break}}n||(S=!0,n=document.createElement("script"),n.charset="utf-8",n.timeout=120,M.nc&&n.setAttribute("nonce",M.nc),n.setAttribute("data-webpack",P+a),n.src=e),c[e]=[v];var T=(b,o)=>{n.onerror=n.onload=null,clearTimeout(L);var d=c[e];if(delete c[e],n.parentNode&&n.parentNode.removeChild(n),d&&d.forEach(s=>s(o)),b)return b(o)},L=setTimeout(T.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=T.bind(null,n.onerror),n.onload=T.bind(null,n.onload),S&&document.head.appendChild(n)}})(),M.r=c=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},M.nmd=c=>(c.paths=[],c.children||(c.children=[]),c),M.j=699,M.p="/mb-proto2/",(()=>{var c={699:0};M.f.j=(v,a)=>{var w=M.o(c,v)?c[v]:void 0;if(w!==0)if(w)a.push(w[2]);else{var n=new Promise((I,T)=>w=c[v]=[I,T]);a.push(w[2]=n);var S=M.p+M.u(v),k=new Error,A=I=>{if(M.o(c,v)&&(w=c[v],w!==0&&(c[v]=void 0),w)){var T=I&&(I.type==="load"?"missing":I.type),L=I&&I.target&&I.target.src;k.message="Loading chunk "+v+" failed.\n("+T+": "+L+")",k.name="ChunkLoadError",k.type=T,k.request=L,w[1](k)}};M.l(S,A,"chunk-"+v,v)}},M.O.j=v=>c[v]===0;var P=(v,a)=>{var[w,n,S]=a,k,A,I=0;if(w.some(L=>c[L]!==0)){for(k in n)M.o(n,k)&&(M.m[k]=n[k]);if(S)var T=S(M)}for(v&&v(a);I<w.length;I++)A=w[I],M.o(c,A)&&c[A]&&c[A][0](),c[A]=0;return M.O(T)},e=self.webpackChunk_mb2023_mb_proto=self.webpackChunk_mb2023_mb_proto||[];e.forEach(P.bind(null,0)),e.push=P.bind(null,e.push.bind(e))})(),M.nc=void 0,M.O(void 0,[31,788,908,347],()=>M(33129)),M.O(void 0,[31,788,908,347],()=>M(69321));var Le=M.O(void 0,[31,788,908,347],()=>M(42276));Le=M.O(Le)})();

//# sourceMappingURL=preview-html-zip-749a43dbfe3d26ffc30c.js.map