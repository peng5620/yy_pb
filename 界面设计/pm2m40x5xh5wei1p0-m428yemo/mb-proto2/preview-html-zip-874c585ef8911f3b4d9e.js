(()=>{"use strict";var De={46664:(n,E,e)=>{e.d(E,{A1:()=>F,A9:()=>Z,Cp:()=>y.Cp,E8:()=>O,F7:()=>Me,G8:()=>be,Gx:()=>h,Jm:()=>te,OJ:()=>v,PK:()=>Ae,Qs:()=>Le,Qy:()=>me,SD:()=>oe,Tf:()=>K,V7:()=>V,Wr:()=>N,XG:()=>ne,Xw:()=>pe,Yu:()=>k,bX:()=>m,dC:()=>Be,hY:()=>de,kZ:()=>ue,l9:()=>w,ob:()=>Ge,qi:()=>r,r3:()=>je,s_:()=>l,sw:()=>Ce,ty:()=>ye,up:()=>Ee,vS:()=>X,vs:()=>ie,wR:()=>Y,wZ:()=>ce,yV:()=>ve,yY:()=>_e,yk:()=>Pe,yr:()=>c});var y=e(52781),a=e(46795),_=e(45465),o=e(72907),b=e(79619),D=e(63967);const x=(t,s)=>{const i=new Error("[NO SENTRY] "+t);return Object.assign(i,s),i},P=(t,s)=>fetchGetJSON("/api/upper/web_v1/design/readonly_initial?access_token="+t+"&password="+s),G=async(t,s)=>{const i="/api/flat/web_v1/preview/initial?access_token="+t+"&view_mode="+s,p=await fetch(i,{credentials:"same-origin"}),A=await p.json();if(p.status!==200)throw x("[fetchGetHead] failed with "+p.status+": "+i,{status:p.status,error_type:A==null?void 0:A.error_type});return A},k=(t,s)=>(0,a.SN)("/api/upper/web_v1/basics/"+t,{...s}),K=async()=>{let t=[];try{const s=await(0,a.DE)("/api/library/v4/recent_keywords");s!=null&&s.keywords&&(t=s==null?void 0:s.keywords)}catch(s){(0,o.$r)()}return t},l=()=>(0,a.sM)("/api/library/v4/recent_keywords"),h=t=>(0,a.Ds)("/api/library/v4/recent_keywords",{keyword:t}),r=async()=>{if((0,b.Z)())return g();{var t;let s;try{s=await(0,a.DE)("/api/library/v3/project_upper/user_combo_groups")}catch(i){return await(0,o.FY)(i),{}}return{userComboGroupList:(t=s)==null?void 0:t.user_combo_groups}}},g=async()=>{var t;let s;try{s=await(0,a.DE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+MB.user.solo_org.cid)}catch(i){return await(0,o.FY)(i),{}}return{userComboGroupList:(t=s)==null?void 0:t.org_combo_groups}},m=async t=>{var s;let{orgCid:i}=t,p;try{p=await(0,a.DE)("/api/library/v3/project_upper/org_combo_groups?org_cid="+i)}catch(A){return await(0,o.FY)(A),{}}return{orgComboGroupList:(s=p)==null?void 0:s.org_combo_groups}},c=async t=>{const{icon_group:s,market_template:i}=await(0,y.Yk)(t.cid),{source:p,title:A}=s||{},H=await(0,a.DE)(p),se=_.I1[A]||A||"svg",{iconGroupData:re}=(0,_.u2)(H,se);return{iconGroupData:re,marketTemplate:i}},v=async()=>{const t=MB.user.solo_org.cid;try{const{asset_groups:s=[],assets:i}=await(0,a.Yo)("/api/library/v6/asset_groups?org_cid="+t);return{userAssetGroupList:s,userAssets:i}}catch(s){return(0,o.$r)(),{userAssetGroupList:[],userAssets:[]}}},w=async function(t){t===void 0&&(t="");const s=t||MB.currentOrg.cid;try{const{asset_groups:i,assets:p}=await(0,a.Yo)("/api/library/v6/asset_groups?org_cid="+s);return{orgAssetGroupList:i,orgAssets:p}}catch(i){return(0,o.$r)(),{orgAssetGroupList:[],orgAssets:[]}}},O=async t=>{if((0,b.Z)())return I(t);try{const{asset:s,user_asset:i}=await(0,a.B7)("/api/library/v3/asset_data/me/search_by_url",{image_url:t});return{asset:s,user_asset:i}}catch(s){await(0,o.FY)(s)}},I=async t=>{const s=MB.user.solo_org.cid;try{const{asset:i,flat_asset:p}=await(0,a.B7)("/api/library/v6/assets/search_by_url",{image_url:t,org_cid:s});return{asset:i,user_asset:p}}catch(i){await(0,o.FY)(i)}},N=async(t,s)=>{try{const{asset:i,flat_asset:p}=await(0,a.B7)("/api/library/v6/assets/search_by_url",{image_url:t,org_cid:s});return{asset:i,org_asset:p}}catch(i){await(0,o.FY)(i)}},V=async t=>{if((0,b.Z)())return j(t);try{const{user_asset_group:s}=await(0,a.uP)("/api/library/v4/users/asset_groups/"+t.cid,{...t});return{user_asset_group:s}}catch(s){await(0,o.FY)(s)}},Z=async(t,s)=>{const{name:i,parentCid:p=null,position:A}=s,{asset_group:H}=await(0,a.zi)("/api/library/v6/asset_groups",{org_cid:t,name:i,parent_cid:p,position:A});return{asset_group:H}},j=async t=>{const{cid:s,name:i,parent_cid:p,position:A}=t;try{const{asset_group:H}=await(0,a.uP)("/api/library/v6/asset_groups/"+s,{name:i,parent_cid:p,position:A});return{user_asset_group:H}}catch(H){await(0,o.FY)(H)}},F=async t=>{const{cid:s,name:i,parent_cid:p,position:A}=t;try{const{asset_group:H}=await(0,a.uP)("/api/library/v6/asset_groups/"+s,{name:i,parent_cid:p,position:A});return{org_asset_group:H}}catch(H){await(0,o.FY)(H)}},Y=async t=>{if((0,b.Z)())return le(t);try{return await(0,a.uP)("/api/library/v3/asset_data/me/assets/"+t.asset_cid,{...t})}catch(s){await(0,o.FY)(s)}},te=async t=>(await(0,a.SN)("/api/library/v6/asset_groups/",{asset_groups:t})).asset_groups,je=async(t,s)=>{const{name:i,groupCid:p}=s;return await(0,a.SN)("/api/library/v6/assets",{cids:t,name:i,group_cid:p})},le=async t=>{try{return await(0,a.uP)("/api/library/v6/assets",{...t})}catch(s){await(0,o.FY)(s)}},de=async t=>{let{cids:s,...i}=t;try{return await(0,a.uP)("/api/library/v6/assets",{cids:s,...i})}catch(p){await(0,o.FY)(p)}},pe=async t=>{let{assetCid:s,name:i,groupCid:p}=t;if((0,b.Z)())return Re({assetCid:s,name:i,groupCid:p});try{await(0,a.B7)("/api/library/v3/asset_data/me/assets",{cid,name:i,group_cid:p})}catch(A){await(0,o.FY)(A)}},Re=async t=>{let{assetCid:s,name:i,groupCid:p}=t;try{await(0,a.B7)("/api/library/v6/assets",{asset_cid:[s],name:i,group_cid:p})}catch(A){await(0,o.FY)(A)}},Ge=async t=>{let{assetCid:s,name:i,groupCid:p}=t;try{const A=await(0,a.B7)("/api/library/v6/assets",{asset_cid:[s],name:i,group_cid:p});return A==null?void 0:A.cid}catch(A){await(0,o.FY)(A)}},ue=async t=>{let{org_cid:s,name:i,group_cid:p}=t;if((0,b.Z)())return ge({org_cid:s,name:i,group_cid:p});try{return(0,a.B7)("/api/library/v3/asset_data/org/asset_group_from_user",{user_asset_group_cid,org_cid:s,org_asset_group_cid})}catch(A){await(0,o.FY)(A)}},ge=async t=>{let{org_cid:s,name:i,group_cid:p}=t;try{return(0,a.B7)("/api/library/v6/asset_groups",{org_cid:s,name:i,parent_cid:null,group_cid:p,position:-99})}catch(A){await(0,o.FY)(A)}},me=async t=>{(0,b.Z)()?await fe(t):await(0,a.sM)("/api/library/v3/asset_data/me/assets/"+t.cid)},fe=async t=>{await(0,D.uz)("/api/library/v6/assets",{cids:[t.cid]})},X=async t=>{await(0,D.uz)("/api/library/v6/assets",{cids:[t.cid]})},ye=async t=>{(0,b.Z)()?await he(t):await(0,a.sM)("/api/library/v3/asset_data/me/asset_groups/"+t)},he=async t=>{await(0,a.sM)("/api/library/v6/asset_groups/"+t)},ve=async t=>{await(0,a.sM)("/api/library/v6/asset_groups/"+t)},oe=t=>(0,a.iv)("/preferences/update",{...t}),Le=async(t,s)=>{if((0,b.Z)())return we(t,s);try{return await(0,a.uP)("/api/library/v4/users/asset_groups/"+t,{...s})}catch(i){await(0,o.FY)(i)}},we=async(t,s)=>{const i=MB.user.solo_org.cid;try{return await(0,a.uP)("/api/library/v6/asset_groups/"+t,{...s,org_cid:i})}catch(p){await(0,o.FY)(p)}},ne=t=>async(s,i)=>{try{const p={...i,org_cid:t};return await(0,a.uP)("/api/library/v6/asset_groups/"+s,{...p})}catch(p){await(0,o.FY)(p)}},_e=async(t,s)=>{let i=null;try{const p=await(0,a.Yo)("/api/community/v1/workspace?category="+t+"&plabel="+s);p!=null&&p.market_templates&&(i=p==null?void 0:p.market_templates)}catch(p){(0,o.$r)()}return i},Me=async(t,s)=>{let i=null,p=null;try{const A=await(0,a.DE)("/flpak/ww-p2wsearch?"+t);if(A!=null&&A.data){const H=A.data,{user_flat_assets:se,user_flat_asset_groups:re,org_flat_assets:Se,org_flat_asset_groups:xe}=H.asset||{};return i={...H,asset:{user_assets:se,user_asset_groups:re,org_assets:Se,org_asset_groups:xe}},p=A.p2mMMap,{data:i,p2mMMap:p}}}catch(A){(0,o.$r)({onClick:H=>H({type:"entry:search-panel:search:from:keyword",payload:{from:s}})})}},ie=async t=>{let s=null;try{const i=await(0,a.DE)("/flpak/ww-p2meta/"+t);i!=null&&i.length&&(s=i)}catch(i){(0,o.$r)()}return s},be=async t=>{let{currentComboPanel:s,projectMetaCid:i}=t;try{await(0,a.zi)("/flpak/ww-migrate-"+s+"-combo-group/"+i+"?mode=normal")}catch(p){await(0,o.FY)(p)}},Pe=async t=>{let{projectBasicCid:s}=t;try{const{userId:i,flatKey:p}=await(0,a.DE)("/api/flat/web_v1/proj2-edit-info?prj2Cid="+s);return{userId:i,flatKey:p}}catch(i){await(0,o.FY)(i)}},Te=async t=>{let{projectBasicCid:s,accessToken:i,password:p}=t;try{const{userId:A,flatKey:H}=await fetchGetJSON("/api/flat/web_v1/proj2-preview-info?prj2Cid="+s+"&access_token="+i+"&password="+p);return{userId:A,flatKey:H}}catch(A){await apiErrorModals(A)}},Ee=t=>(0,a.DE)("/api/dashboard/v5/orgs/"+t),Ce=async t=>{const{project:s}=await(0,a.DE)("/api/dashboard/v5/projects/"+t);return s},ce=async t=>(0,a.DE)("/api/upper/web_v1/basics/statstics/"+t),Be=async()=>{try{const{result:t}=await(0,a.DE)("/api/community/v1/community/scene_tag_labels?label_type=combo_group");return t}catch(t){console.log(t)}},Ae=async t=>{try{const{stickers:s}=await(0,a.zi)("/api/community/v1/sticker_search",{q:t,page:1,page_size:200});return s}catch(s){return console.log(s),[]}}},41449:(n,E,e)=>{e.d(E,{Dw:()=>a,H:()=>o,QQ:()=>b,o$:()=>y});const y="/proto",a=P=>y+"/"+P,_=P=>{const G=/^\/proto\/design\/(?:([^/]+?))$/i.exec(P);return G?G[1]:new Error("project cid error")},o=P=>{let{search:G,pathname:k}=P;if(k.includes("/sharing"))return k.includes("dashboard")||k.includes("htmlzip")?k.split("/").at(-3):k.includes("embed/v2")?location.pathname.split("/").at(-4):k.split("/").at(-2);{const K=new URLSearchParams(G).get("token");if(K)return K;const l=/^\/proto\/([^/]+?)(?:\/forum|\/uichina|\/embed|\/embed\/v2|\/htmlzip|\/sharing|\/ro)?\/?$/i.exec(k);return l?l[1]:""}},b="/p2mkt_view",D=P=>b+"/"+P,x=P=>/^\/p2mkt_view\/(?:([^/]+?))$/i.exec(P)[1]},42276:(n,E,e)=>{var y=e(26114),a=e(94947),_=e(39208),o=e(56656);const b={"sk-bouncedelay":"ZdD58bXGNcNoQjiPeXLu"},D={"sk-bouncedelay":"ZBrU7Yes6CevGkk6hArA"};e(16708),e(85991),e(97381);var x=e(74059),P=e(51044),G=e(46479),k=e(83140),K=e(72605),l=e(27104),h=e(54852),r=e(55793),g=e(39271),m=e(49269),c=e(57464);class v extends P.PureComponent{constructor(d){super(d);const{store:M,projectBasic:S,projectMeta:B,isHtmlZip:R}=d,U=new URLSearchParams(location.search);let W="",u="";U.get("view_mode")==="read_only"&&(W=U.get("screen")||"",u=U.get("canvasId")||""),this.state={visibleIsEmpty:!1};try{const C=(0,g.rV)(W);M.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:S,projectMeta:B,screenCid:C,canvasCid:u,isHtmlZip:R}})}catch(C){this.state={visibleIsEmpty:!0}}}componentDidMount(){this.props.onComponentDidMount(),window.addEventListener("message",m.a,!1)}componentWillUnmount(){window.removeEventListener("message",m.a,!1)}render(){const{store:d}=this.props;return this.state.visibleIsEmpty?(0,r.V)():(0,c.jsx)(K.Kq,{store:d,children:(0,c.jsx)(h.A,{children:(0,c.jsx)(l.A,{})})})}}var w=e(82218);const O=async L=>{let{projectMetaCid:d}=L;await(0,w.F2)({userId:void 0,flpakKey:d,onTransferError:w.z0,onReadOnlyError:w.sH,isDummyCmt:!0,__fetchFlpakAsync:a.BD},void 0)};var I=e(98148);const N=function(L,d,M){const S=d.getGuidesData()||"[]",B=new Set(JSON.parse(S)),R=new Set,U=new Map,W={checkGuideHasShown:u=>ENV.IS_ON_PREMISES||B.has(u),checkGuideToBeShown:u=>R.has(u),getState:()=>({commonGuidesHasShown:Array.from(B),commonGuidesToBeShown:Array.from(R),mountGuidesMap:U}),tryToShowGuide:u=>{var C;if(B.has(u)||!((C=MB)!=null&&(C=C.user)!=null&&C.id)||ENV.IS_ON_PREMISES)return;const T=document.getElementById("MD_"+u);if(T){T.style.display="block";return}R.add(u),(0,I.o)(u,L,M)},markGuideAsRead:u=>{B.add(u),d.setGuidesData(JSON.stringify(Array.from(B)))},batchMarkGuideAsRead:u=>{u.forEach(C=>B.add(C)),d.setGuidesData(JSON.stringify(Array.from(B)))},closeAndMarkGuideAsRead:u=>{W.checkGuideHasShown(u)||(W.closeGuide(u),W.markGuideAsRead(u))},closeGuide:u=>{const C=document.getElementById("MD_"+u);C&&C.parentNode&&C.parentNode.removeChild(C)},closeAllGuide:()=>{const u=document.getElementById("GUIDES");u&&u.parentNode&&u.parentNode.removeChild(u)},removeGuide:u=>{B.delete(u),d.setGuidesData(JSON.stringify(Array.from(B)))},tryToContinueMountGuide:(u,C)=>{const T=U.get(u);T&&typeof(T==null?void 0:T.handleContinue)=="function"&&T.handleContinue(C)},tryToResizeMountGuide:u=>{const C=U.get(u);C&&typeof(C==null?void 0:C.handleResize)=="function"&&C.handleResize()},tryToCloseMountGuide:u=>{const C=U.get(u);C&&typeof(C==null?void 0:C.handleClose)=="function"&&C.handleClose()},registerMountGuideCallback:(u,C)=>{const T=U.get(u)||{};U.set(u,{...T,...C})},removeMountGuideCallback:(u,C)=>{if(!C){U.delete(u);return}const T=U.get(u)||{};U.set(u,{...T,[C]:void 0})}};return W},V=L=>{let{store:d,commonGuidesData:M,isDesign:S,isPreview:B}=L;MB.commonGuideHelper=N(d,{getGuidesData:()=>M,setGuidesData:updateUserCommonGuidesData},{isDesign:S,isPreview:B})},Z=L=>{let{store:d,isDesign:M,isPreview:S}=L;const B={guide:{dashboard_guides:"",workspace_guides:"",square_guides:null,workspace_guides_version:"",default_team_cid:"",root_project_team_cid:"",workspace_guides_2203:"",workspace_guides_2203_version:"",aboard_guides:""},guide_project_template_cid:"",guide_project_template_2203_cid:"",guide_flow_template_cid:"",guide_design_template_cid:"",guide_prototype_template_cid:""},{guide:{workspace_guides:R}}=B;MB.commonGuideHelper=N(d,{getGuidesData:()=>R,setGuidesData:()=>{}},{isDesign:M,isPreview:S})};var j=e(77757),F=e(25058),Y=e(88753),te=e(42226),je=e(68673),le=e(29601),de=e(79619);const pe=L=>{let{initialData:d,designOptions:M,global:S,onUpdateSharing:B}=L;const{user:R,org:U,team:W,preference:u,orgList:C,user_fcg:T,org_fcg:z,space:$,canEditByCurrentUser:Q}=d,{currentUser:J,currentOrg:q}=(0,de.n)({user:R,org:U});(0,te.kZ)((0,le.w)()),Object.assign(MB,{user:J||{},currentOrg:q,canEditByCurrentUser:Q,global:{...S,popupHelper:(0,F.L)(),experienceLoginModalHelper:j.F}}),MB.action("current:update:state",{currentOrg:q,currentTeam:W,currentUser:J,orgList:C,user_fcg:T,org_fcg:z,currentSpace:$}),MB.action("update:design:options",{designOptions:M}),R!=null&&R.id&&MB.action("entry:init:preference",{preference:u}),B&&B()},Re=async L=>{let{designStore:d}=L,M="[]";try{const{guide:S}=await requestUserCommonGuidesData();M=S==null?void 0:S.workspace_guides}catch(S){console.error("\u83B7\u53D6 guide_data \u5931\u8D25")}await initCommonGuide({store:d,commonGuidesData:M,isDesign:!0,isPreview:!1})},Ge=async L=>{let{type:d,projectBasicCid:M}=L;switch(d){case DesignType.Design:return requestProjectFullDataFlat(M);case DesignType.Experience:return requestExperienceFullDataFlat(M);default:throw new Error(d+" not found in known design types for "+M)}};var ue=e(66778),ge=e(64334),me=e(60310),fe=e(12201),X=e(9376);const ye=L=>{const{isEmbedV1:d=!1}=L||{};return{isDesktop:!((0,X.Fr)()||d),isInApp:!1,isMultiLink:!1,isMobile:(0,X.Fr)(),isIOSClient:(0,X.Hv)(),isStandAlone:(0,X.Gd)(),isEmbedV1:d,isEmbedV2:!1,isHTMLZip:!1,isUIChina:(0,X.II)(),isForum:(0,X.uf)(),isElectron:(0,X.b8)(),isSquare:!1,isFeishu:(0,X.Fl)(),isWechat:(0,X.vq)(),...L}},he=L=>{const{isMobile:d,isEmbedV2:M,isSquare:S}=L;return d?me.A:M||S?ge.A:fe.A},ve=L=>{let{designOptions:d,previewOptions:M,initialData:S,onComponentDidMount:B,sharing:R}=L,U=!1;const W=(0,k.s)(MB);pe({initialData:S,designOptions:d,global:{designOptions:d,previewOptions:M}});const{isIOSClient:u,isStandAlone:C}=M;(C||u)&&(document.documentElement.style.height="100vh");const{runnerController:T,messageBucket:z,webpackInterface:$,PreviewApp:Q}=(0,ue._)(he(M));return Object.assign(MB,{runnerController:T,messageBucket:z,webpackInterface:$,global:{...MB.global||{},popupHelper:(0,F.L)(),designOptions:d,previewOptions:M}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{previewOptions:M}}),{requestData:async()=>{const{user:J,org:q,preference:ae,project_basic:ee,project_meta:ke}=S;return Z({store:W,isDesign:!0,isPreview:!1}),Object.assign(MB,{tag:ee==null?void 0:ee.version}),MB.action("update:design:options",{designOptions:MB.global.designOptions}),await O({projectMetaCid:ke.cid}),MB.webpackInterface.store.dispatch({type:"preview:set:current-projectShare",payload:{projectShare:R}}),MB.webpackInterface.store.dispatch({type:"entry:init:preview:preference",payload:{preference:ae||{}}}),Object.assign(MB,{user:J||{},canEditByCurrentUser:!1,org:q||void 0}),MB.webpackInterface.store.dispatch({type:"entry:state:init"}),U=!0,{projectAlike:ee,projectMeta:ke,projectShare:R}},renderDesign:J=>{let{projectAlike:q,projectMeta:ae}=J;return U?(0,c.jsx)(v,{store:W,projectBasic:q,projectMeta:ae,onComponentDidMount:B,isHtmlZip:!0}):null},renderPreview:J=>{let{projectAlike:q,projectMeta:ae,projectShare:ee}=J;return U?((0,r.X)(ee),(0,c.jsx)(Q,{store:$.store,previewMode:"preview",projectAlike:q,projectMeta:ae,projectShare:ee})):null}}};var oe=e(21676);const Le=oe.Ay.div.withConfig({displayName:"styles__StyledExampleApp",componentId:"sc-1e7mzg5-0"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;.loading-container{position:absolute;top:50%;left:50%;.mb-loading{width:80px;height:80px;margin-top:-40px;margin-left:-40px;}.chris-icon{position:absolute;left:68%;top:-8%;}}}.mb-design-page{height:100%;&,#mb-toolbar{transition:all 0.2s ease-in-out;}&.is-collapse{opacity:0;z-index:0;#mb-toolbar{transform:translateY(-100%);}.mb-right-panel{transform:translateX(100%);}}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;transition:all 0.2s ease-in-out;&.is-collapse{opacity:0;z-index:0;}}"]),we=oe.Ay.div.withConfig({displayName:"styles__StyledROExampleApp",componentId:"sc-1e7mzg5-1"})(["&{position:absolute;top:0;left:0;bottom:0;right:0;transition:all 0.2s ease-in-out;.loading-container{position:absolute;top:50%;left:50%;.mb-loading{width:80px;height:80px;margin-top:-40px;margin-left:-40px;}.chris-icon{position:absolute;left:68%;top:-8%;}}}.mb-design-page{height:100%;position:relative;z-index:1;&.is-collapse{opacity:0;z-index:0;}}.mb-preview-page{position:absolute;top:0;left:0;width:100%;bottom:0;font-size:12px;&.is-collapse{opacity:0;z-index:0;}}"]);var ne=e(1694),_e=e(21952),Me=e(86634),ie=e.n(Me);class be extends P.PureComponent{render(){const{isCollapse:d,renderReadOnly:M,projectAlike:S,projectMeta:B}=this.props;return(0,c.jsx)("div",{ref:R=>this.$element=R,className:ie()("mb-design-page",{"is-collapse":d}),children:M({projectAlike:S,projectMeta:B})})}}class Pe extends P.PureComponent{constructor(d){super(d),(0,x.A)(this,"setElementRef",M=>this.$element=M),MB.f.inPreview=!d.isCollapse}componentDidMount(){this.$element.addEventListener("wheel",this.handleWheel,{passive:!1})}componentWillUnmount(){MB.f.inPreview=!1,this.$element.removeEventListener("wheel",this.handleWheel)}handleWheel(d){(d.ctrlKey||d.metaKey)&&d.preventDefault()}render(){const{isCollapse:d,renderPreview:M,projectAlike:S,projectMeta:B,projectShare:R}=this.props;return(0,c.jsx)("div",{ref:this.setElementRef,className:ie()("mb-preview-page",{"is-collapse":d}),children:M({projectAlike:S,projectMeta:B,projectShare:R})})}}var Te=e(9847),Ee=e(14941),Ce=e(86431),ce=e(24013),Be=e(31900),Ae=e(15139),t=e(40684),s=e(76445),i=e(6637);const p=L=>{const{current:{currentProject:d},ui:{toolbar:{isShowSticky:M},leftLayout:{leftPanel:{show:S,width:B},directory:{screen:{currentPage:R},bottom:{height:U},screen:{screenCollapseKeySet:W}}},rightLayout:{rightPanel:{show:u,resizedWidth:C}},fixedLayout:{modals:{previewCanvasModal:T,previewModal:z}}},editor:{state:{mode:{fullScreenMode:$}}}}=MB.__store__.getState(),Q=()=>{const{pageKey:J,canvasKey:q}=Ae.A.validateAndTryCorrectPGAndCVKey(R.key,L,null,d.category===t.t_);MB.webpackInterface.store.dispatch({type:"entry:runner:activate:canvas",payload:{pageKey:J,canvasKey:q,saveHistory:!1,forceInit:!0,keepScale:!1}}),MB.webpackInterface.store.dispatch({type:"preview:set:leftPaneWidth",payload:{leftPaneWidth:B!=null?B:250}}),MB.webpackInterface.store.dispatch({type:"preview:update:state",payload:{hasChangedScaleManually:!1}}),MB.webpackInterface.store.dispatch({type:"preview:panel:set:height",payload:{panelHeight:U}}),MB.webpackInterface.store.dispatch({type:"preview:set:rightPaneWidth",payload:{rightPaneWidth:C,projectCid:d.cid}}),$&&MB.webpackInterface.store.dispatch({type:"reducer:preview-toolbar:fullscreen",payload:{isFullScreenMode:!0}}),MB.webpackInterface.store.dispatch({type:"ST:update",payload:{STMode:M}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:isMinimized",payload:{isMinimized:!S,isMemorize:!$}}),MB.webpackInterface.store.dispatch({type:"entry:preview-setting:toggle:rightPane",payload:{isShowRightPane:u,isMemorize:!$}}),MB.webpackInterface.store.dispatch({type:"preview:set:collapsedRBPageKeySet",payload:{collapsedRBPageKeySet:W}}),MB.webpackInterface.store.dispatch({type:"entry:preview:toggle:isHiddenToolBar",payload:{value:!1}}),MB.action("modal:reset:state"),MB.action("entry:exit:edit:basket"),MB.__store__.dispatch({type:"entry:comment:disabled",payload:{noWigglingCommentCid:!0}}),MB.__store__.dispatch({type:"versions:update",payload:{isVersionManagementPaneShow:!1}}),MB.__store__.dispatch(s.GO.toggleInspectMode(!1)),MB.__store__.dispatch(s.GO.toggleHandMode(!1)),MB.__store__.dispatch(s.GO.select([])),MB.__store__.dispatch({type:"elbow:update",payload:{isInElbowMode:!1}}),MB.__store__.dispatch({type:"entry:ST:STMode:disable"}),MB.__store__.dispatch({type:"ST:clear"})};T!=null&&T.isOpen||z!=null&&z.isOpen?(MB.action("modal:reset:preview:modal:state"),setTimeout(()=>{Q()},600)):Q()},A=(L,d)=>{const{container:{current:{rootProject:M},common:{leftPaneWidth:S,panelHeight:B,rightPaneWidth:R,collapsedRBPageKeySet:U},runner:{activePageKey:W},previewSetting:{isFullScreenMode:u,isMinimized:C,isShowRightPane:T}},ST:{STMode:z}}=MB.webpackInterface.store.getState(),{ui:{leftLayout:{directory:{screen:{currentPage:$}}}},editor:{state:{mode:{isHtmlZipPreview:Q}}}}=MB.__store__.getState();$.key!==W&&MB.__store__.dispatch({type:"entry:root-project:readOnly:activate",payload:{projectBasic:L,projectMeta:d,screenCid:W,isHtmlZip:Q}}),MB.__store__.dispatch({type:"screen:add:collapseKeySet",payload:{refs:U,projectCid:M.cid}}),u&&MB.__store__.dispatch(s.GO.toggleFullScreenMode(!0)),MB.webpackInterface.store.dispatch({type:"entry:runner:cleanup:audio"}),MB.webpackInterface.store.dispatch({type:"runner:reset:state:except:history"}),MB.webpackInterface.store.dispatch({type:"container:comment:reset:state"}),MB.webpackInterface.store.dispatch({type:"preview:previewPanel:navindex",payload:{previewPanelNavIndex:0}}),MB.__store__.dispatch({type:"left-panel:set:width",payload:{width:S,projectCid:M.cid}}),MB.__store__.dispatch({type:"directory-panel:bottom:set:height",payload:{height:B}}),MB.__store__.dispatch({type:"right-side-panel:update:resize:width",payload:{width:R,projectCid:M.cid}}),MB.__store__.dispatch({type:"right-side-panel:collapse:panel",payload:{show:T,isMemorize:!u}}),MB.__store__.dispatch({type:"left-panel:collapse:panel:show",payload:{show:!C,isMemorize:!u}}),MB.__store__.dispatch({type:"entry:observe:dom:size:update-viewport-rect"}),MB.__store__.dispatch({type:"entry:isShowSticky:toggle",payload:{isShowSticky:z}}),requestAnimationFrame(()=>MB.__store__.dispatch({type:"entry:update:viewport:rect"})),MB.webpackInterface.store.dispatch({type:"entry:comment:disabled"}),(0,i.RF)(W)};class H extends P.PureComponent{constructor(d){super(d),(0,x.A)(this,"handleWheelChanged",T=>{if(T.deltaX===0)return;const z=document.getElementById("workspace"),$=z.scrollLeft+z.offsetWidth===z.scrollWidth&&T.deltaX>0,Q=z.scrollLeft===0&&T.deltaX<0;($||Q)&&T.preventDefault()}),(0,x.A)(this,"handleDesignDidMount",()=>{MB.reduxEntry.setEntryMap(Te.T),this.setState({isLoading:!1})}),(0,x.A)(this,"keyboardManager",new ne.Rr);const{viewMode:M,designOptions:S,previewOptions:B,initialData:R,sharing:U}=d;MB.switchToPreview=T=>{this.state.viewMode!=="device"&&((0,ce.N8)("device"),p(T),this.setState({viewMode:"device"}))},MB.switchToReadOnly=()=>{if(this.state.viewMode==="read_only")return;const{projectAlike:T,projectMeta:z}=this.state;(0,ce.N8)("read_only"),A(T,z),this.setState({viewMode:"read_only"})},this.state={isLoading:!0,isDataLoaded:!1,viewMode:M,projectAlike:null,projectMeta:null,projectShare:void 0};const{requestData:W,renderDesign:u,renderPreview:C}=ve({initialData:R,designOptions:S,previewOptions:B,onComponentDidMount:this.handleDesignDidMount,sharing:U});this.requestData=W,this.renderDesign=u,this.renderPreview=C}componentDidMount(){Promise.all([this.requestData()]).then(d=>{let[{projectAlike:M,projectMeta:S,projectShare:B}]=d;this.setState({projectAlike:M,projectMeta:S,projectShare:B},()=>{this.setState({isDataLoaded:!0})});const R=document.getElementById("workspace");R&&R.addEventListener("wheel",this.handleWheelChanged)})}componentWillUnmount(){const d=document.getElementById("workspace");d&&d.removeEventListener("wheel",this.handleWheelChanged,{capture:!0})}render(){const{isLoading:d,isDataLoaded:M,viewMode:S,projectAlike:B,projectMeta:R,projectShare:U}=this.state,{renderDesign:W,renderPreview:u}=this;return(0,c.jsx)(Be.G.Provider,{value:S,children:(0,c.jsx)(ne.M.Provider,{value:this.keyboardManager,children:(0,c.jsx)(_e.$,{children:(0,c.jsxs)(we,{className:"example-app",children:[M&&(0,c.jsx)(be,{isCollapse:S!=="read_only",projectAlike:B,projectMeta:R,renderReadOnly:W}),M&&(0,c.jsx)(Pe,{isCollapse:S!=="device",projectAlike:B,projectMeta:R,projectShare:U,renderPreview:u}),d&&(0,c.jsxs)("div",{className:"loading-container",children:[(0,c.jsx)(G.Tw,{className:"mb-loading"}),(0,Ce.X)()&&(0,c.jsx)(Ee.n,{className:"chris-icon"})]})]})})})})}}var se=e(36820),re=e(88223),Se=e(10286),xe=e(36429);e.p="./mb-proto2/";const Ue=document.getElementById("workspace"),Fe=async()=>{var L,d;const M=ye({isHTMLZip:!0});(0,X.Fr)()&&((L=document.querySelector("body"))==null||L.classList.add("mobile"));let S=await(0,a.Rz)();const{projectUpper:B,projectMeta:R}=S;S={...S,projectName:B.name,project_basic:B,project_meta:R};const{sharing:U}=await(0,Se.J_)({project:B}),{generateLang:W}=await xe.qu.loadLLG();await W(),document.title=""+(0,re.qk)(B.name||B.title),!ENV.IS_ON_PREMISES&&(0,se.I2)();const u=(d=new URLSearchParams(location.search))==null?void 0:d.get("view_mode"),C=window.HZv5_PREVIEW_MODE||"",T=u?u==="device":C==="device",z={isDesign:!0,isExperience:!1,isLoggedExperience:!1};(0,y.createRoot)(Ue).render((0,c.jsx)(H,{initialData:S,viewMode:T?"device":"read_only",designOptions:z,previewOptions:M,sharing:U}))};document.addEventListener("DOMContentLoaded",async()=>{await Fe()})},67122:(n,E,e)=>{e.d(E,{L7:()=>o,M2:()=>x,RY:()=>h,XI:()=>D,ix:()=>b,kP:()=>l,lK:()=>P,rD:()=>K});var y=e(59305),a=e(96731);const _=/^image\/(png|jpg|jpeg|gif|svg|svg\+xml)$/i,o=2,b=5,D=(r,g,m,c,v)=>{if(!_.test(r.type))throw Object.assign(new Error(I18N.dUtils.damaged_file),{desc:I18N.dUtils.support_file_type,asset:r});const w=(0,y.xR)(m,c),{trial:O,plan:I,maxPicBytes:N}=w,V=N/1024/1024,Z=(0,y.Ke)(I,O),j=!!MB.currentOrg,{current_plan:F}=MB.user,Y=j?V:F==="free"?o:b;if(r.size>Y*1024*1024)throw g==="library"?(ModalHelper&&ModalHelper.libraryNotice&&ModalHelper.libraryNotice("\u4E0A\u4F20\u56FE\u7247\u5BB9\u91CF\u8FC7\u5927","error"),new Error("dashboard upload failed")):c?(Z&&(Z===I18N.Common.business_plan||Z===I18N.Common.business_trial_plan)?MB.action("modal:update:state",{orgFullBeyondNotice:{isOpen:!0,beyondType:"picSize"}}):MB.action("modal:update:state",{rightsAndInterestsModal:{isOpen:!0,type:a.hC.OrgMaxPicSize}}),new Error("NoErrorTips")):(MB.action("modal:update:state",{rightsAndInterestsModal:{isOpen:!0,type:a.hC.SoloMaxPicSize}}),new Error("NoErrorTips"))},x=async r=>{const g=await new Promise((c,v)=>{const w=new FileReader;w.onerror=()=>v(new Error(I18N.dUtils.unsupported)),w.onload=O=>c(O.target.result),w.readAsDataURL(r)}),m=await new Promise((c,v)=>{const w=new Image;w.onerror=()=>v(new Error(I18N.dUtils.unsupported)),w.onload=()=>c(w),w.src=g});return{data:g,width:m.width,height:m.height}},P=r=>{r.payload&&r.payload.status===401?MB.global.popupHelper.alertAsync({title:I18N.dUtils.err_info_modal.INVALID_COOKIE.title,desc:I18N.dUtils.err_info_modal.INVALID_COOKIE.desc,confirmText:I18N.dUtils.confirm}).then(()=>{location.href=location.origin+"/signin"}):MB.global.popupHelper.alertAsync({title:r.message,desc:r.desc,isHTML:r.isHTML,confirmText:r.confirmText}).then(()=>{r.type==="free"&&MB.global.popupHelper.chargeAsync({mode:"solo",productId:8988,hours:"yearly",payEntrance:"\u56FE\u7247\u9650\u5236-\u5347\u7EA7\u4E2A\u4EBA"})})},G=(r,g)=>r.endsWith(g)?r:r+("-"+g),k=(r,g)=>r.startsWith("#")?"#"+G(r.slice(1),g):null,K=(r,g,m)=>{if(r.attributes){const c=r.getAttribute("id");c&&c.length>0&&(r.setAttribute("id",G(c,g)),m&&m.id&&m.id.push(c));const v=r.getAttribute("class");if(v&&v.length>0){const O=v.split(/\s+/).map(I=>G(I,g)).join(" ");r.setAttribute("class",O),m&&m.class&&m.class.push(v)}for(const O of["href","xlink:href"]){const I=r.getAttribute(O);if(I&&I.length>0){const N=k(I,g);N&&r.setAttribute(O,N)}}const w=["clip-path","color-profile","fill","filter","marker-start","marker-mid","marker-end","mask","stroke","style"];for(const O of w){const I=r.getAttribute(O);if(I&&I.length>0){const N=I.replace(/url\((.*?)\)/gi,(V,Z)=>{const j=k(Z,g);return j==null?V:"url("+j+")"});N&&r.setAttribute(O,N)}}for(const O of["begin","end"]){const I=r.getAttribute(O);if(I&&I.length>0){const N=I.split(/\s*;\s+/).map(V=>{if(V.endsWith(".end")||V.endsWith(".start")){const[Z,j]=V.split(".");return G(Z,g)+"."+j}return V});r.setAttribute(O,N.join("; "))}}if(r.childNodes)for(const O of r.childNodes)K(O,g,m)}},l=(r,g,m)=>{const c=r?r.querySelectorAll("style"):[];m.id=[...new Set(m.id)],m.class=[...new Set(m.class)];for(const v of c)v&&!v.textContent.includes(g)&&(m.id.forEach(w=>{v.textContent=v.textContent.replace(new RegExp("\\b"+w+"\\b","g"),w+"-"+g)}),m.class.forEach(w=>{v.textContent=v.textContent.replace(new RegExp("\\b"+w+"\\b","g"),w+"-"+g)}))},h=r=>{const{path:g}=r==null?void 0:r.iconData,m=new DOMParser,c='<svg xmlns="http://www.w3.org/2000/svg">'+g+"</svg>",w=m.parseFromString(c,"text/html").querySelector("svg"),O={id:[],class:[]},I=(r==null?void 0:r.key)||"",N=I.includes("/")?I.split("/").join(""):I;return K(w,N,O),l(w,N,O),w}},59305:(n,E,e)=>{e.d(E,{Ke:()=>G,ln:()=>K,xR:()=>k});var y=e(76713),a=e.n(y),_=e(45852),o=e(67122);const b=300,D=(l,h,r)=>{const{is_trial_enabled:g}=l||{};if(g||!x(h==null?void 0:h.plan,h==null?void 0:h.trial))return!1;const{trial_end_on:c}=h;return c?!1:!r.some(w=>{const O=P(w),{value_in_cents:I}=w;return["paid"].includes(O)||I>10})},x=(l,h)=>l==="org_free"&&!h,P=l=>{if(x(l==null?void 0:l.plan,l==null?void 0:l.trial))return"free";const{paid:h,trial:r,value_in_cents:g,next_billing_on:m,plan:c}=l||{},v=dayjs(m).startOf("day"),w=dayjs().startOf("day"),O=v.isSameOrBefore(w);let I;return O?(I=g>10?"paidExpire":"trialExpire",c||(I="defaultExpire")):(h&&(I="paid"),r&&(I="trial")),I},G=(l,h)=>l==="org_free"&&!h?I18N.Common.free_plan:l==="org_lite"?I18N.Common.team_plan:l==="org_full"?I18N.Common.business_plan:l==="org_free"&&h?I18N.Common.business_trial_plan:I18N.Common.business_plan,k=(l,h)=>{if(h&&h.cid){const{limitation:r,plan:g,trial:m,paid:c,next_billing_on:v,value_in_cents:w}=h;return{storage:r.storage,isExportWatermark:r.is_export_watermark,maxPicBytes:r.max_pic_bytes,maxScreenCount:r.max_p2page_count||3,maxProjectVersionCount:r.max_project_version_count,maxMktCount:r.max_mkt_count,plan:g,trial:m,paid:c,next_billing_on:v,value_in_cents:w,maxSharingCount:r.max_project_share_count,maxProjectCount:r.max_project_count,maxCanvasCount:r.max_p2canvas_count||20,maxWidgetCount:r.max_widget_count||b}}if(l&&l.cid){const{limitation:r,current_plan:g,trial:m,paid:c,next_billing_on:v}=l;return{storage:r.storage,current_plan:g,trial:m,paid:c,next_billing_on:v,isExportWatermark:!1,maxPicBytes:g==="solo"?o.ix:o.L7,maxScreenCount:(r==null?void 0:r.max_p2page_count)||3,maxProjectVersionCount:0,maxMktCount:0,value_in_cents:0,maxSharingCount:g==="solo"?3:1,maxProjectCount:r.max_project_count||3,maxCanvasCount:r.max_p2canvas_count||20,maxWidgetCount:r.max_widget_count||b}}return{storage:0,isExportWatermark:!1,maxPicBytes:0,maxScreenCount:0,maxProjectVersionCount:0,maxMktCount:0,plan:"",trial:!1,paid:!1,next_billing_on:"",value_in_cents:0,maxSharingCount:1,maxProjectCount:3,maxCanvasCount:20,maxWidgetCount:b}},K=(l,h)=>{let r;return h&&(r=x(h.plan,h.trial)?3:30),!h&&l&&(r=(0,_.e)(l)==="free"?3:30),r}},45852:(n,E,e)=>{e.d(E,{e:()=>o});var y=e(76713),a=e.n(y);const _=b=>{if(!b)return"\u514D\u8D39\u7248";const{edition:D,current_plan:x,trial:P}=b;if(D==="premium_lifetime")return"\u5C0A\u4EAB\u7EC8\u8EAB\u7248";if(D==="standard_lifetime")return"\u7EC8\u8EAB\u7248";if(x==="free")return"\u514D\u8D39\u7248";if(x==="solo")return P?"\u8BD5\u7528\u7248":"\u6807\u51C6\u7248"},o=b=>{if(!b)return"free";const{plan:D,paid:x,trial:P,next_billing_on:G}=b,k=a()(G).startOf("day"),K=a()().startOf("day"),l=k.isSameOrBefore(K);let h;return l?h="free":(x&&(h="paid"),D==="solo"&&P&&(h="trial"),D==="free"&&(h="free")),h}},9376:(n,E,e)=>{e.d(E,{Bd:()=>O,Fl:()=>D,Fr:()=>K,Gd:()=>m,H8:()=>P,Hv:()=>g,II:()=>c,Md:()=>w,VK:()=>Z,b8:()=>_,cX:()=>o,gm:()=>G,lg:()=>I,m0:()=>l,nr:()=>k,uF:()=>b,uf:()=>v,vq:()=>x});var y,a;const _=()=>window.MB_DESKTOP_VERSION||window.isElectron||/Electron/i.test(navigator.userAgent),o=()=>/(Macintosh)/i.test(navigator.userAgent),b=()=>/(Windows)/i.test(navigator.userAgent),D=()=>/(Lark)/i.test(navigator.userAgent),x=()=>/MicroMessenger/i.test(navigator.userAgent),P=()=>/Chrome/i.test(navigator.userAgent),G=()=>/Firefox/i.test(navigator.userAgent),k=()=>/Safari/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent),K=()=>{const j=new URLSearchParams(location.search);return j&&j.get("inapp")==="1"&&(e.g.isInAPP=!0),/(iPod|iPhone|iPad|Android|MobileClient)/.test(navigator.userAgent)||window.isInAPP},l=()=>/Android/i.test(navigator.userAgent),h=()=>/(iPad)/.test(navigator.userAgent),r=()=>/(iPod|iPhone|iPad)/.test(navigator.userAgent),g=()=>!!(window.webkit&&window.webkit.messageHandlers),m=()=>navigator.standalone,c=()=>/\/uichina$/.test(location.pathname),v=()=>/\/forum$/.test(location.pathname),w=()=>/(MobileClient)/.test(navigator.userAgent),O=!!(typeof window<"u"&&window.document&&window.document.createElement),I=/(mac|iphone|ipod|ipad)/i.test(typeof navigator<"u"?((y=navigator)==null?void 0:y.platform)||((a=navigator)==null||(a=a.userAgentData)==null?void 0:a.platform):""),N=()=>{var j;if(!((j=navigator)!=null&&j.plugins))return!1;for(const F in navigator.plugins)if(navigator.plugins[F]&&navigator.plugins[F].filename==="np-mswmp.dll")return!0;return!1},V=j=>{j=j.toLowerCase();const F=j.includes("qihu"),Y=j.includes("360se"),te=j.includes("360ee");return F&&(Y||te)},Z=()=>{let j,F;const Y=navigator.userAgent;if(F=void 0,j=Y.match(/(opera|chrome|qq|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],/trident/i.test(j[1]))return F=/\brv[ :]+(\d+)/g.exec(Y)||[],{name:"IE",version:parseFloat(F[1]||"")};if(j[1]==="Chrome"){if(V(Y)||N())return{name:"360Browser",version:"unknown"};if(/Edg/i.test(Y))return F=Y.match(/Edg\/(\d+)/i),{name:"Edge",version:F?parseFloat(F[1]):"unknown"};if(F=Y.match(/\b(OPR|Edge)\/(\d+)/),F!==null)return{name:F[1].replace("OPR","Opera"),version:parseFloat(F[2])}}return/QQBrowser/i.test(Y)?(F=Y.match(/QQBrowser\/(\d+)/i),{name:"QQBrowser",version:F?parseFloat(F[1]):"unknown"}):(j=j[2]?[j[1],j[2]]:[navigator.appName,navigator.appVersion,"-?"],(F=Y.match(/version\/(\d+)/i))!==null&&j.splice(1,1,F[1]),{name:j[0],version:parseFloat(j[1])})}},6637:(n,E,e)=>{e.d(E,{Fw:()=>D,H1:()=>P,RF:()=>K,cL:()=>G,fl:()=>k,hw:()=>x,u5:()=>_,yA:()=>b});var y=e(12298),a=e(6795);const _=l=>{let{width:h,height:r,scale:g}=l;const m=g/100,c=document.querySelector("#canvas").getBoundingClientRect(),v=document.querySelector(".mb-viewport").getBoundingClientRect(),w={x:(v.left+v.right)/2,y:(v.top+v.bottom)/2},O={x:(w.x-c.left)/m,y:(w.y-c.top)/m};return{top:Math.round(O.y-r/2),left:Math.round(O.x-h/2)}},o=(l,h)=>{const r=document.querySelector(l);if(!r)return;const g=r.querySelector('[data-cid="'+h+'"]')||r.querySelector('[data-interactive-target-key="'+h+'"]');if(!g)return;const{height:m,top:c}=r.getBoundingClientRect(),v=g.getBoundingClientRect(),w=v.top-c>=m,O=v.top<c;(w||O)&&(r.scrollTop+=v.top-c)},b=(0,a.hb)((l,h)=>{if(!h||!l)return;const r=l.querySelector('.rn-content-item[data-cid="'+h+'"]');if(!r)return;const{height:g,top:m}=l.getBoundingClientRect(),c=r.getBoundingClientRect(),v=c.top-m>=g,w=c.top<m;(v||w)&&(l.scrollTop+=c.top-m)},{timeout:500}),D=(l,h,r)=>{let{width:g,height:m,scale:c}=h,{top:v}=_({width:g,height:m,scale:c});const w=l.sort((N,V)=>V.widget.x+V.widget.w/2-(N.widget.x+N.widget.w/2)),{widget:{x:O,w:I}}=w[0];return r.length!==0&&(v=sdkStore.getHotKeyListAABB(r.map(N=>N.key))[1]),{left:O+I/2+50,top:v}},x=(l,h,r)=>{const g=sdkStore.getHotKeyListAABB(r.map(w=>w.key));let m=g[2],c=(0,y.Q5)(m,l),v;for(;;){if(!c||c[0]>m+h+50){v={x:m+50,y:g[1]};break}m=c[2],c=(0,y.Q5)(m,l)}return{left:v.x,top:v.y}},P=l=>o("#mobile-screen-tree",l),G=l=>o(".mb-preview-page .canvas-scroll-list",l),k=l=>o(".screen-list-container",l),K=l=>o(".mb-design-page #screen-scroll-list",l)},16700:n=>{n.exports=canvg},94994:n=>{n.exports=dompurify},9820:n=>{n.exports=html2canvas}},Oe={};function f(n){var E=Oe[n];if(E!==void 0)return E.exports;var e=Oe[n]={id:n,loaded:!1,exports:{}};return De[n].call(e.exports,e,e.exports,f),e.loaded=!0,e.exports}f.m=De,f.amdO={},(()=>{var n=[];f.O=(E,e,y,a)=>{if(e){a=a||0;for(var _=n.length;_>0&&n[_-1][2]>a;_--)n[_]=n[_-1];n[_]=[e,y,a];return}for(var o=1/0,_=0;_<n.length;_++){for(var[e,y,a]=n[_],b=!0,D=0;D<e.length;D++)(a&!1||o>=a)&&Object.keys(f.O).every(l=>f.O[l](e[D]))?e.splice(D--,1):(b=!1,a<o&&(o=a));if(b){n.splice(_--,1);var x=y();x!==void 0&&(E=x)}}return E}})(),f.n=n=>{var E=n&&n.__esModule?()=>n.default:()=>n;return f.d(E,{a:E}),E},(()=>{var n=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,E;f.t=function(e,y){if(y&1&&(e=this(e)),y&8||typeof e=="object"&&e&&(y&4&&e.__esModule||y&16&&typeof e.then=="function"))return e;var a=Object.create(null);f.r(a);var _={};E=E||[null,n({}),n([]),n(n)];for(var o=y&2&&e;typeof o=="object"&&!~E.indexOf(o);o=n(o))Object.getOwnPropertyNames(o).forEach(b=>_[b]=()=>e[b]);return _.default=()=>e,f.d(a,_),a}})(),f.d=(n,E)=>{for(var e in E)f.o(E,e)&&!f.o(n,e)&&Object.defineProperty(n,e,{enumerable:!0,get:E[e]})},f.f={},f.e=n=>Promise.all(Object.keys(f.f).reduce((E,e)=>(f.f[e](n,E),E),[])),f.u=n=>""+{437:"lazy-lib-fontkit",703:"lazy-lib-rehype",956:"lazy-lib-i18n",976:"lazy-lib-dl"}[n]+"-"+{437:"f928a89d007db33b8764",703:"f1953540fb6d5bc8a699",956:"be9e93fb0beb14e9d625",976:"ea72883bd82bab66e6fc"}[n]+".js",f.miniCssF=n=>{},f.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch(n){if(typeof window=="object")return window}}(),f.o=(n,E)=>Object.prototype.hasOwnProperty.call(n,E),(()=>{var n={},E="@mb2023/mb-proto:";f.l=(e,y,a,_)=>{if(n[e]){n[e].push(y);return}var o,b;if(a!==void 0)for(var D=document.getElementsByTagName("script"),x=0;x<D.length;x++){var P=D[x];if(P.getAttribute("src")==e||P.getAttribute("data-webpack")==E+a){o=P;break}}o||(b=!0,o=document.createElement("script"),o.charset="utf-8",o.timeout=120,f.nc&&o.setAttribute("nonce",f.nc),o.setAttribute("data-webpack",E+a),o.src=e),n[e]=[y];var G=(K,l)=>{o.onerror=o.onload=null,clearTimeout(k);var h=n[e];if(delete n[e],o.parentNode&&o.parentNode.removeChild(o),h&&h.forEach(r=>r(l)),K)return K(l)},k=setTimeout(G.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=G.bind(null,o.onerror),o.onload=G.bind(null,o.onload),b&&document.head.appendChild(o)}})(),f.r=n=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},f.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),f.j=699,f.p="/mb-proto2/",(()=>{var n={699:0};f.f.j=(y,a)=>{var _=f.o(n,y)?n[y]:void 0;if(_!==0)if(_)a.push(_[2]);else{var o=new Promise((P,G)=>_=n[y]=[P,G]);a.push(_[2]=o);var b=f.p+f.u(y),D=new Error,x=P=>{if(f.o(n,y)&&(_=n[y],_!==0&&(n[y]=void 0),_)){var G=P&&(P.type==="load"?"missing":P.type),k=P&&P.target&&P.target.src;D.message="Loading chunk "+y+" failed.\n("+G+": "+k+")",D.name="ChunkLoadError",D.type=G,D.request=k,_[1](D)}};f.l(b,x,"chunk-"+y,y)}},f.O.j=y=>n[y]===0;var E=(y,a)=>{var[_,o,b]=a,D,x,P=0;if(_.some(k=>n[k]!==0)){for(D in o)f.o(o,D)&&(f.m[D]=o[D]);if(b)var G=b(f)}for(y&&y(a);P<_.length;P++)x=_[P],f.o(n,x)&&n[x]&&n[x][0](),n[x]=0;return f.O(G)},e=self.webpackChunk_mb2023_mb_proto=self.webpackChunk_mb2023_mb_proto||[];e.forEach(E.bind(null,0)),e.push=E.bind(null,e.push.bind(e))})(),f.nc=void 0,f.O(void 0,[31,788,908,347],()=>f(33129)),f.O(void 0,[31,788,908,347],()=>f(69321));var Ie=f.O(void 0,[31,788,908,347],()=>f(42276));Ie=f.O(Ie)})();

//# sourceMappingURL=preview-html-zip-874c585ef8911f3b4d9e.js.map